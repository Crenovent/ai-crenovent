=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Frankfurt'}
_assign_user_to_region called with location_info: {'address': 'Frankfurt'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Frankfurt'}
Calling geolocation service with user_data: {'location': 'Frankfurt'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Portland'}
_assign_user_to_region called with location_info: {'address': 'Portland'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Portland'}
Calling geolocation service with user_data: {'location': 'Portland'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Portland', 'full_location': 'Portland'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Portland'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-POR', 'district_name': 'Portland', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Portland'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Milwaukee'}
_assign_user_to_region called with location_info: {'address': 'Milwaukee'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Milwaukee'}
Calling geolocation service with user_data: {'location': 'Milwaukee'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Milwaukee', 'full_location': 'Milwaukee'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Milwaukee'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-MIL', 'district_name': 'Milwaukee', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Milwaukee'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Manchester'}
_assign_user_to_region called with location_info: {'address': 'Manchester'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Manchester'}
Calling geolocation service with user_data: {'location': 'Manchester'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Birmingham'}
_assign_user_to_region called with location_info: {'address': 'Birmingham'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Birmingham'}
Calling geolocation service with user_data: {'location': 'Birmingham'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Munich'}
_assign_user_to_region called with location_info: {'address': 'Munich'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Munich'}
Calling geolocation service with user_data: {'location': 'Munich'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Hamburg'}
_assign_user_to_region called with location_info: {'address': 'Hamburg'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Hamburg'}
Calling geolocation service with user_data: {'location': 'Hamburg'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Hamburg', 'full_location': 'Hamburg'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Hamburg'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-HAM', 'district_name': 'Hamburg', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Hamburg'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Spokane'}
_assign_user_to_region called with location_info: {'address': 'Spokane'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Spokane'}
Calling geolocation service with user_data: {'location': 'Spokane'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Spokane', 'full_location': 'Spokane'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Eugene'}
_assign_user_to_region called with location_info: {'address': 'Eugene'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Eugene'}
Calling geolocation service with user_data: {'location': 'Eugene'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Eugene', 'full_location': 'Eugene'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Albany'}
_assign_user_to_region called with location_info: {'address': 'Albany'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Albany'}
Calling geolocation service with user_data: {'location': 'Albany'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Albany', 'full_location': 'Albany'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Providence'}
_assign_user_to_region called with location_info: {'address': 'Providence'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Providence'}
Calling geolocation service with user_data: {'location': 'Providence'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Providence', 'full_location': 'Providence'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Rockford'}
_assign_user_to_region called with location_info: {'address': 'Rockford'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Rockford'}
Calling geolocation service with user_data: {'location': 'Rockford'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Rockford', 'full_location': 'Rockford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Madison'}
_assign_user_to_region called with location_info: {'address': 'Madison'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Madison'}
Calling geolocation service with user_data: {'location': 'Madison'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Madison', 'full_location': 'Madison'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Fort Worth'}
_assign_user_to_region called with location_info: {'address': 'Fort Worth'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Fort Worth'}
Calling geolocation service with user_data: {'location': 'Fort Worth'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Fort Worth', 'full_location': 'Fort Worth'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'San Antonio'}
_assign_user_to_region called with location_info: {'address': 'San Antonio'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Antonio'}
Calling geolocation service with user_data: {'location': 'San Antonio'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Antonio', 'full_location': 'San Antonio'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Antonio'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Antonio', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Antonio'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Frankfurt'}
_assign_user_to_region called with location_info: {'address': 'Frankfurt'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Frankfurt'}
Calling geolocation service with user_data: {'location': 'Frankfurt'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Portland'}
_assign_user_to_region called with location_info: {'address': 'Portland'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Portland'}
Calling geolocation service with user_data: {'location': 'Portland'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Portland', 'full_location': 'Portland'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Portland'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-POR', 'district_name': 'Portland', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Portland'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Milwaukee'}
_assign_user_to_region called with location_info: {'address': 'Milwaukee'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Milwaukee'}
Calling geolocation service with user_data: {'location': 'Milwaukee'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Milwaukee', 'full_location': 'Milwaukee'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Milwaukee'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-MIL', 'district_name': 'Milwaukee', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Milwaukee'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Manchester'}
_assign_user_to_region called with location_info: {'address': 'Manchester'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Manchester'}
Calling geolocation service with user_data: {'location': 'Manchester'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Birmingham'}
_assign_user_to_region called with location_info: {'address': 'Birmingham'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Birmingham'}
Calling geolocation service with user_data: {'location': 'Birmingham'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Munich'}
_assign_user_to_region called with location_info: {'address': 'Munich'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Munich'}
Calling geolocation service with user_data: {'location': 'Munich'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Hamburg'}
_assign_user_to_region called with location_info: {'address': 'Hamburg'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Hamburg'}
Calling geolocation service with user_data: {'location': 'Hamburg'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Hamburg', 'full_location': 'Hamburg'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Hamburg'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-HAM', 'district_name': 'Hamburg', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Hamburg'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Spokane'}
_assign_user_to_region called with location_info: {'address': 'Spokane'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Spokane'}
Calling geolocation service with user_data: {'location': 'Spokane'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Spokane', 'full_location': 'Spokane'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Eugene'}
_assign_user_to_region called with location_info: {'address': 'Eugene'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Eugene'}
Calling geolocation service with user_data: {'location': 'Eugene'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Eugene', 'full_location': 'Eugene'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Albany'}
_assign_user_to_region called with location_info: {'address': 'Albany'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Albany'}
Calling geolocation service with user_data: {'location': 'Albany'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Albany', 'full_location': 'Albany'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Providence'}
_assign_user_to_region called with location_info: {'address': 'Providence'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Providence'}
Calling geolocation service with user_data: {'location': 'Providence'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Providence', 'full_location': 'Providence'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Rockford'}
_assign_user_to_region called with location_info: {'address': 'Rockford'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Rockford'}
Calling geolocation service with user_data: {'location': 'Rockford'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Rockford', 'full_location': 'Rockford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Madison'}
_assign_user_to_region called with location_info: {'address': 'Madison'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Madison'}
Calling geolocation service with user_data: {'location': 'Madison'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Madison', 'full_location': 'Madison'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Fort Worth'}
_assign_user_to_region called with location_info: {'address': 'Fort Worth'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Fort Worth'}
Calling geolocation service with user_data: {'location': 'Fort Worth'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Fort Worth', 'full_location': 'Fort Worth'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'San Antonio'}
_assign_user_to_region called with location_info: {'address': 'San Antonio'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Antonio'}
Calling geolocation service with user_data: {'location': 'San Antonio'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Antonio', 'full_location': 'San Antonio'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Antonio'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Antonio', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Antonio'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Frankfurt'}
_assign_user_to_region called with location_info: {'address': 'Frankfurt'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Frankfurt'}
Calling geolocation service with user_data: {'location': 'Frankfurt'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Portland'}
_assign_user_to_region called with location_info: {'address': 'Portland'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Portland'}
Calling geolocation service with user_data: {'location': 'Portland'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Portland', 'full_location': 'Portland'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Portland'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-POR', 'district_name': 'Portland', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Portland'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Milwaukee'}
_assign_user_to_region called with location_info: {'address': 'Milwaukee'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Milwaukee'}
Calling geolocation service with user_data: {'location': 'Milwaukee'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Milwaukee', 'full_location': 'Milwaukee'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Milwaukee'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-MIL', 'district_name': 'Milwaukee', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Milwaukee'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Manchester'}
_assign_user_to_region called with location_info: {'address': 'Manchester'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Manchester'}
Calling geolocation service with user_data: {'location': 'Manchester'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Birmingham'}
_assign_user_to_region called with location_info: {'address': 'Birmingham'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Birmingham'}
Calling geolocation service with user_data: {'location': 'Birmingham'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Munich'}
_assign_user_to_region called with location_info: {'address': 'Munich'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Munich'}
Calling geolocation service with user_data: {'location': 'Munich'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Hamburg'}
_assign_user_to_region called with location_info: {'address': 'Hamburg'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Hamburg'}
Calling geolocation service with user_data: {'location': 'Hamburg'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Hamburg', 'full_location': 'Hamburg'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Hamburg'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-HAM', 'district_name': 'Hamburg', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Hamburg'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Spokane'}
_assign_user_to_region called with location_info: {'address': 'Spokane'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Spokane'}
Calling geolocation service with user_data: {'location': 'Spokane'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Spokane', 'full_location': 'Spokane'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Eugene'}
_assign_user_to_region called with location_info: {'address': 'Eugene'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Eugene'}
Calling geolocation service with user_data: {'location': 'Eugene'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Eugene', 'full_location': 'Eugene'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Albany'}
_assign_user_to_region called with location_info: {'address': 'Albany'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Albany'}
Calling geolocation service with user_data: {'location': 'Albany'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Albany', 'full_location': 'Albany'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Providence'}
_assign_user_to_region called with location_info: {'address': 'Providence'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Providence'}
Calling geolocation service with user_data: {'location': 'Providence'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Providence', 'full_location': 'Providence'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Rockford'}
_assign_user_to_region called with location_info: {'address': 'Rockford'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Rockford'}
Calling geolocation service with user_data: {'location': 'Rockford'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Rockford', 'full_location': 'Rockford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Madison'}
_assign_user_to_region called with location_info: {'address': 'Madison'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Madison'}
Calling geolocation service with user_data: {'location': 'Madison'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Madison', 'full_location': 'Madison'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Fort Worth'}
_assign_user_to_region called with location_info: {'address': 'Fort Worth'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Fort Worth'}
Calling geolocation service with user_data: {'location': 'Fort Worth'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Fort Worth', 'full_location': 'Fort Worth'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'San Antonio'}
_assign_user_to_region called with location_info: {'address': 'San Antonio'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Antonio'}
Calling geolocation service with user_data: {'location': 'San Antonio'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Antonio', 'full_location': 'San Antonio'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Antonio'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Antonio', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Antonio'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Michael Thompson
Location info: None
Processing user Jennifer Walsh
Location info: None
Processing user Robert Kim
Location info: None
Processing user Amanda Davis
Location info: None
Processing user Carlos Martinez
Location info: None
Processing user Linda Chen
Location info: None
Processing user Thomas Anderson
Location info: None
Processing user Sarah Johnson
Location info: None
Processing user Mark Wilson
Location info: None
Processing user Jessica Brown
Location info: None
Processing user Daniel Lee
Location info: None
Processing user Rachel Miller
Location info: None
Processing user Kevin Zhang
Location info: None
Processing user Lisa Garcia
Location info: None
Processing user James Rodriguez
Location info: None
Processing user Amy Liu
Location info: None
Processing user Chris Taylor
Location info: None
Processing user Emily White
Location info: None
Processing user Ryan Murphy
Location info: None
Processing user Sophie Turner
Location info: None
Processing user Alex Johnson
Location info: None
Processing user Maria Santos
Location info: None
Processing user Brian Cooper
Location info: None
Processing user Ashley Parker
Location info: None
Processing user Nathan Brooks
Location info: None
Processing user Victoria Adams
Location info: None
Processing user Jordan Hill
Location info: None
Processing user Grace Wang
Location info: None
Processing user Tyler Scott
Location info: None
Processing user Olivia Martinez
Location info: None
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Michael Thompson
Successfully processed user Michael Thompson
Processing user 2/30: Jennifer Walsh
Successfully processed user Jennifer Walsh
Processing user 3/30: Robert Kim
Successfully processed user Robert Kim
Processing user 4/30: Amanda Davis
Successfully processed user Amanda Davis
Processing user 5/30: Carlos Martinez
Successfully processed user Carlos Martinez
Processing user 6/30: Linda Chen
Successfully processed user Linda Chen
Processing user 7/30: Thomas Anderson
Successfully processed user Thomas Anderson
Processing user 8/30: Sarah Johnson
Successfully processed user Sarah Johnson
Processing user 9/30: Mark Wilson
Successfully processed user Mark Wilson
Processing user 10/30: Jessica Brown
Successfully processed user Jessica Brown
Processing user 11/30: Daniel Lee
Successfully processed user Daniel Lee
Processing user 12/30: Rachel Miller
Successfully processed user Rachel Miller
Processing user 13/30: Kevin Zhang
Successfully processed user Kevin Zhang
Processing user 14/30: Lisa Garcia
Successfully processed user Lisa Garcia
Processing user 15/30: James Rodriguez
Successfully processed user James Rodriguez
Processing user 16/30: Amy Liu
Successfully processed user Amy Liu
Processing user 17/30: Chris Taylor
Successfully processed user Chris Taylor
Processing user 18/30: Emily White
Successfully processed user Emily White
Processing user 19/30: Ryan Murphy
Successfully processed user Ryan Murphy
Processing user 20/30: Sophie Turner
Successfully processed user Sophie Turner
Processing user 21/30: Alex Johnson
Successfully processed user Alex Johnson
Processing user 22/30: Maria Santos
Successfully processed user Maria Santos
Processing user 23/30: Brian Cooper
Successfully processed user Brian Cooper
Processing user 24/30: Ashley Parker
Successfully processed user Ashley Parker
Processing user 25/30: Nathan Brooks
Successfully processed user Nathan Brooks
Processing user 26/30: Victoria Adams
Successfully processed user Victoria Adams
Processing user 27/30: Jordan Hill
Successfully processed user Jordan Hill
Processing user 28/30: Grace Wang
Successfully processed user Grace Wang
Processing user 29/30: Tyler Scott
Successfully processed user Tyler Scott
Processing user 30/30: Olivia Martinez
Successfully processed user Olivia Martinez
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'London'}
_assign_user_to_region called with location_info: {'address': 'London'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'London'}
Calling geolocation service with user_data: {'location': 'London'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Frankfurt'}
_assign_user_to_region called with location_info: {'address': 'Frankfurt'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Frankfurt'}
Calling geolocation service with user_data: {'location': 'Frankfurt'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Seattle'}
_assign_user_to_region called with location_info: {'address': 'Seattle'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Seattle'}
Calling geolocation service with user_data: {'location': 'Seattle'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Seattle', 'full_location': 'Seattle'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Seattle'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SEA', 'district_name': 'Seattle', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Seattle'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Portland'}
_assign_user_to_region called with location_info: {'address': 'Portland'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Portland'}
Calling geolocation service with user_data: {'location': 'Portland'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Portland', 'full_location': 'Portland'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Portland'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-POR', 'district_name': 'Portland', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Portland'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'New York'}
_assign_user_to_region called with location_info: {'address': 'New York'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'New York'}
Calling geolocation service with user_data: {'location': 'New York'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Chicago'}
_assign_user_to_region called with location_info: {'address': 'Chicago'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Chicago'}
Calling geolocation service with user_data: {'location': 'Chicago'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Chicago', 'full_location': 'Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Milwaukee'}
_assign_user_to_region called with location_info: {'address': 'Milwaukee'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Milwaukee'}
Calling geolocation service with user_data: {'location': 'Milwaukee'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Milwaukee', 'full_location': 'Milwaukee'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Milwaukee'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-MIL', 'district_name': 'Milwaukee', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Milwaukee'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Dallas'}
_assign_user_to_region called with location_info: {'address': 'Dallas'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Dallas'}
Calling geolocation service with user_data: {'location': 'Dallas'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Dallas', 'full_location': 'Dallas'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Dallas'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DAL', 'district_name': 'Dallas', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Dallas'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Manchester'}
_assign_user_to_region called with location_info: {'address': 'Manchester'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Manchester'}
Calling geolocation service with user_data: {'location': 'Manchester'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Birmingham'}
_assign_user_to_region called with location_info: {'address': 'Birmingham'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Birmingham'}
Calling geolocation service with user_data: {'location': 'Birmingham'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Munich'}
_assign_user_to_region called with location_info: {'address': 'Munich'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Munich'}
Calling geolocation service with user_data: {'location': 'Munich'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Hamburg'}
_assign_user_to_region called with location_info: {'address': 'Hamburg'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Hamburg'}
Calling geolocation service with user_data: {'location': 'Hamburg'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Hamburg', 'full_location': 'Hamburg'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Hamburg'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-HAM', 'district_name': 'Hamburg', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Hamburg'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Spokane'}
_assign_user_to_region called with location_info: {'address': 'Spokane'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Spokane'}
Calling geolocation service with user_data: {'location': 'Spokane'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Spokane', 'full_location': 'Spokane'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Eugene'}
_assign_user_to_region called with location_info: {'address': 'Eugene'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Eugene'}
Calling geolocation service with user_data: {'location': 'Eugene'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Eugene', 'full_location': 'Eugene'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Albany'}
_assign_user_to_region called with location_info: {'address': 'Albany'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Albany'}
Calling geolocation service with user_data: {'location': 'Albany'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Albany', 'full_location': 'Albany'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Providence'}
_assign_user_to_region called with location_info: {'address': 'Providence'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Providence'}
Calling geolocation service with user_data: {'location': 'Providence'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Providence', 'full_location': 'Providence'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Rockford'}
_assign_user_to_region called with location_info: {'address': 'Rockford'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Rockford'}
Calling geolocation service with user_data: {'location': 'Rockford'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Rockford', 'full_location': 'Rockford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Madison'}
_assign_user_to_region called with location_info: {'address': 'Madison'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Madison'}
Calling geolocation service with user_data: {'location': 'Madison'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Madison', 'full_location': 'Madison'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'Fort Worth'}
_assign_user_to_region called with location_info: {'address': 'Fort Worth'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Fort Worth'}
Calling geolocation service with user_data: {'location': 'Fort Worth'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Fort Worth', 'full_location': 'Fort Worth'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Processing user Unknown
Location info: {'address': 'San Antonio'}
_assign_user_to_region called with location_info: {'address': 'San Antonio'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Antonio'}
Calling geolocation service with user_data: {'location': 'San Antonio'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Antonio', 'full_location': 'San Antonio'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Antonio'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Antonio', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Antonio'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
Processing user Unknown
Location info: None
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'San Francisco', 'office': 'San Francisco'}
_assign_user_to_region called with location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'San Francisco'}
Calling geolocation service with user_data: {'location': 'San Francisco'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Boston', 'office': 'Boston'}
_assign_user_to_region called with location_info: {'address': 'Boston', 'office': 'Boston'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Boston'}
Calling geolocation service with user_data: {'location': 'Boston'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Unknown
Location info: {'address': 'Austin', 'office': 'Austin'}
_assign_user_to_region called with location_info: {'address': 'Austin', 'office': 'Austin'}
Using class-level UltraDynamicGeolocationService
User data for geolocation: {'location': 'Austin'}
Calling geolocation service with user_data: {'location': 'Austin'}
Geolocation result: {'location_found': True, 'location_data': {'address': 'Austin', 'full_location': 'Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Amanda Foster (row 0)
Raw row data: {'Employee Name': 'Amanda Foster', 'Work Email': 'amanda.foster@techstartup.io', 'Reports To Email': '', 'Team': 'Revenue', 'Role': 'Chief Revenue Officer', 'Office Location': 'Boston', 'Employee Number': 'HUB001', 'Hire Date': '2021-01-15', 'User Status': 'Active', 'Permissions': 'Super Admin', 'Department': 'Executive'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Carlos Mendoza (row 1)
Raw row data: {'Employee Name': 'Carlos Mendoza', 'Work Email': 'carlos.mendoza@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Revenue', 'Role': 'VP Sales', 'Office Location': 'Boston', 'Employee Number': 'HUB002', 'Hire Date': '2021-03-20', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Priya Sharma (row 2)
Raw row data: {'Employee Name': 'Priya Sharma', 'Work Email': 'priya.sharma@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Marketing', 'Role': 'VP Marketing', 'Office Location': 'Boston', 'Employee Number': 'HUB003', 'Hire Date': '2021-05-10', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jake Morrison (row 3)
Raw row data: {'Employee Name': 'Jake Morrison', 'Work Email': 'jake.morrison@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB004', 'Hire Date': '2021-08-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maria Gonzalez (row 4)
Raw row data: {'Employee Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Austin', 'Employee Number': 'HUB005', 'Hire Date': '2021-09-22', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ben Parker (row 5)
Raw row data: {'Employee Name': 'Ben Parker', 'Work Email': 'ben.parker@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Marketing Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB006', 'Hire Date': '2021-11-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Chang (row 6)
Raw row data: {'Employee Name': 'Lisa Chang', 'Work Email': 'lisa.chang@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Marketing Manager', 'Office Location': 'San Francisco', 'Employee Number': 'HUB007', 'Hire Date': '2022-01-12', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan O'Connor (row 7)
Raw row data: {'Employee Name': "Ryan O'Connor", 'Work Email': 'ryan.oconnor@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB008', 'Hire Date': '2022-02-28', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Kim (row 8)
Raw row data: {'Employee Name': 'Sarah Kim', 'Work Email': 'sarah.kim@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB009', 'Hire Date': '2022-03-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Diego Ramirez (row 9)
Raw row data: {'Employee Name': 'Diego Ramirez', 'Work Email': 'diego.ramirez@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB010', 'Hire Date': '2022-04-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Wu (row 10)
Raw row data: {'Employee Name': 'Jessica Wu', 'Work Email': 'jessica.wu@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB011', 'Hire Date': '2022-05-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 11)
Raw row data: {'Employee Name': 'Emma Thompson', 'Work Email': 'emma.thompson@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Content Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB012', 'Hire Date': '2022-06-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lee (row 12)
Raw row data: {'Employee Name': 'Nathan Lee', 'Work Email': 'nathan.lee@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Digital Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB013', 'Hire Date': '2022-08-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophia Chen (row 13)
Raw row data: {'Employee Name': 'Sophia Chen', 'Work Email': 'sophia.chen@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Analyst', 'Office Location': 'San Francisco', 'Employee Number': 'HUB014', 'Hire Date': '2022-09-10', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Rodriguez (row 14)
Raw row data: {'Employee Name': 'Alex Rodriguez', 'Work Email': 'alex.rodriguez@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'SEO Specialist', 'Office Location': 'San Francisco', 'Employee Number': 'HUB015', 'Hire Date': '2022-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Johnson (row 15)
Raw row data: {'Employee Name': 'Tyler Johnson', 'Work Email': 'tyler.johnson@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB016', 'Hire Date': '2022-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 16)
Raw row data: {'Employee Name': 'Maya Patel', 'Work Email': 'maya.patel@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB017', 'Hire Date': '2022-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Smith (row 17)
Raw row data: {'Employee Name': 'Jordan Smith', 'Work Email': 'jordan.smith@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB018', 'Hire Date': '2023-01-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Davis (row 18)
Raw row data: {'Employee Name': 'Chloe Davis', 'Work Email': 'chloe.davis@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB019', 'Hire Date': '2023-02-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Luis Martinez (row 19)
Raw row data: {'Employee Name': 'Luis Martinez', 'Work Email': 'luis.martinez@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB020', 'Hire Date': '2023-03-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zara Ahmed (row 20)
Raw row data: {'Employee Name': 'Zara Ahmed', 'Work Email': 'zara.ahmed@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB021', 'Hire Date': '2023-04-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin Zhang (row 21)
Raw row data: {'Employee Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB022', 'Hire Date': '2023-05-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 22)
Raw row data: {'Employee Name': 'Rachel Green', 'Work Email': 'rachel.green@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB023', 'Hire Date': '2023-06-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Moore (row 23)
Raw row data: {'Employee Name': 'Ethan Moore', 'Work Email': 'ethan.moore@techstartup.io', 'Reports To Email': 'tyler.johnson@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB024', 'Hire Date': '2023-07-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Liu (row 24)
Raw row data: {'Employee Name': 'Grace Liu', 'Work Email': 'grace.liu@techstartup.io', 'Reports To Email': 'maya.patel@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB025', 'Hire Date': '2023-08-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Williams (row 25)
Raw row data: {'Employee Name': 'Noah Williams', 'Work Email': 'noah.williams@techstartup.io', 'Reports To Email': 'jordan.smith@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB026', 'Hire Date': '2023-09-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Brown (row 26)
Raw row data: {'Employee Name': 'Ava Brown', 'Work Email': 'ava.brown@techstartup.io', 'Reports To Email': 'chloe.davis@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB027', 'Hire Date': '2023-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Garcia (row 27)
Raw row data: {'Employee Name': 'Logan Garcia', 'Work Email': 'logan.garcia@techstartup.io', 'Reports To Email': 'luis.martinez@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB028', 'Hire Date': '2023-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Taylor (row 28)
Raw row data: {'Employee Name': 'Mia Taylor', 'Work Email': 'mia.taylor@techstartup.io', 'Reports To Email': 'zara.ahmed@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB029', 'Hire Date': '2023-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Amanda Foster (row 0)
Raw row data: {'Employee Name': 'Amanda Foster', 'Work Email': 'amanda.foster@techstartup.io', 'Reports To Email': '', 'Team': 'Revenue', 'Role': 'Chief Revenue Officer', 'Office Location': 'Boston', 'Employee Number': 'HUB001', 'Hire Date': '2021-01-15', 'User Status': 'Active', 'Permissions': 'Super Admin', 'Department': 'Executive'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Carlos Mendoza (row 1)
Raw row data: {'Employee Name': 'Carlos Mendoza', 'Work Email': 'carlos.mendoza@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Revenue', 'Role': 'VP Sales', 'Office Location': 'Boston', 'Employee Number': 'HUB002', 'Hire Date': '2021-03-20', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Priya Sharma (row 2)
Raw row data: {'Employee Name': 'Priya Sharma', 'Work Email': 'priya.sharma@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Marketing', 'Role': 'VP Marketing', 'Office Location': 'Boston', 'Employee Number': 'HUB003', 'Hire Date': '2021-05-10', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jake Morrison (row 3)
Raw row data: {'Employee Name': 'Jake Morrison', 'Work Email': 'jake.morrison@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB004', 'Hire Date': '2021-08-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maria Gonzalez (row 4)
Raw row data: {'Employee Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Austin', 'Employee Number': 'HUB005', 'Hire Date': '2021-09-22', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ben Parker (row 5)
Raw row data: {'Employee Name': 'Ben Parker', 'Work Email': 'ben.parker@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Marketing Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB006', 'Hire Date': '2021-11-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Chang (row 6)
Raw row data: {'Employee Name': 'Lisa Chang', 'Work Email': 'lisa.chang@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Marketing Manager', 'Office Location': 'San Francisco', 'Employee Number': 'HUB007', 'Hire Date': '2022-01-12', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan O'Connor (row 7)
Raw row data: {'Employee Name': "Ryan O'Connor", 'Work Email': 'ryan.oconnor@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB008', 'Hire Date': '2022-02-28', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Kim (row 8)
Raw row data: {'Employee Name': 'Sarah Kim', 'Work Email': 'sarah.kim@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB009', 'Hire Date': '2022-03-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Diego Ramirez (row 9)
Raw row data: {'Employee Name': 'Diego Ramirez', 'Work Email': 'diego.ramirez@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB010', 'Hire Date': '2022-04-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Wu (row 10)
Raw row data: {'Employee Name': 'Jessica Wu', 'Work Email': 'jessica.wu@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB011', 'Hire Date': '2022-05-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 11)
Raw row data: {'Employee Name': 'Emma Thompson', 'Work Email': 'emma.thompson@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Content Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB012', 'Hire Date': '2022-06-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lee (row 12)
Raw row data: {'Employee Name': 'Nathan Lee', 'Work Email': 'nathan.lee@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Digital Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB013', 'Hire Date': '2022-08-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophia Chen (row 13)
Raw row data: {'Employee Name': 'Sophia Chen', 'Work Email': 'sophia.chen@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Analyst', 'Office Location': 'San Francisco', 'Employee Number': 'HUB014', 'Hire Date': '2022-09-10', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Rodriguez (row 14)
Raw row data: {'Employee Name': 'Alex Rodriguez', 'Work Email': 'alex.rodriguez@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'SEO Specialist', 'Office Location': 'San Francisco', 'Employee Number': 'HUB015', 'Hire Date': '2022-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Johnson (row 15)
Raw row data: {'Employee Name': 'Tyler Johnson', 'Work Email': 'tyler.johnson@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB016', 'Hire Date': '2022-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 16)
Raw row data: {'Employee Name': 'Maya Patel', 'Work Email': 'maya.patel@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB017', 'Hire Date': '2022-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Smith (row 17)
Raw row data: {'Employee Name': 'Jordan Smith', 'Work Email': 'jordan.smith@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB018', 'Hire Date': '2023-01-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Davis (row 18)
Raw row data: {'Employee Name': 'Chloe Davis', 'Work Email': 'chloe.davis@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB019', 'Hire Date': '2023-02-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Luis Martinez (row 19)
Raw row data: {'Employee Name': 'Luis Martinez', 'Work Email': 'luis.martinez@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB020', 'Hire Date': '2023-03-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zara Ahmed (row 20)
Raw row data: {'Employee Name': 'Zara Ahmed', 'Work Email': 'zara.ahmed@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB021', 'Hire Date': '2023-04-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin Zhang (row 21)
Raw row data: {'Employee Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB022', 'Hire Date': '2023-05-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 22)
Raw row data: {'Employee Name': 'Rachel Green', 'Work Email': 'rachel.green@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB023', 'Hire Date': '2023-06-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Moore (row 23)
Raw row data: {'Employee Name': 'Ethan Moore', 'Work Email': 'ethan.moore@techstartup.io', 'Reports To Email': 'tyler.johnson@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB024', 'Hire Date': '2023-07-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Liu (row 24)
Raw row data: {'Employee Name': 'Grace Liu', 'Work Email': 'grace.liu@techstartup.io', 'Reports To Email': 'maya.patel@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB025', 'Hire Date': '2023-08-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Williams (row 25)
Raw row data: {'Employee Name': 'Noah Williams', 'Work Email': 'noah.williams@techstartup.io', 'Reports To Email': 'jordan.smith@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB026', 'Hire Date': '2023-09-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Brown (row 26)
Raw row data: {'Employee Name': 'Ava Brown', 'Work Email': 'ava.brown@techstartup.io', 'Reports To Email': 'chloe.davis@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB027', 'Hire Date': '2023-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Garcia (row 27)
Raw row data: {'Employee Name': 'Logan Garcia', 'Work Email': 'logan.garcia@techstartup.io', 'Reports To Email': 'luis.martinez@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB028', 'Hire Date': '2023-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Taylor (row 28)
Raw row data: {'Employee Name': 'Mia Taylor', 'Work Email': 'mia.taylor@techstartup.io', 'Reports To Email': 'zara.ahmed@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB029', 'Hire Date': '2023-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Amanda Foster (row 0)
Raw row data: {'Employee Name': 'Amanda Foster', 'Work Email': 'amanda.foster@techstartup.io', 'Reports To Email': '', 'Team': 'Revenue', 'Role': 'Chief Revenue Officer', 'Office Location': 'Boston', 'Employee Number': 'HUB001', 'Hire Date': '2021-01-15', 'User Status': 'Active', 'Permissions': 'Super Admin', 'Department': 'Executive'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Carlos Mendoza (row 1)
Raw row data: {'Employee Name': 'Carlos Mendoza', 'Work Email': 'carlos.mendoza@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Revenue', 'Role': 'VP Sales', 'Office Location': 'Boston', 'Employee Number': 'HUB002', 'Hire Date': '2021-03-20', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Priya Sharma (row 2)
Raw row data: {'Employee Name': 'Priya Sharma', 'Work Email': 'priya.sharma@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Marketing', 'Role': 'VP Marketing', 'Office Location': 'Boston', 'Employee Number': 'HUB003', 'Hire Date': '2021-05-10', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jake Morrison (row 3)
Raw row data: {'Employee Name': 'Jake Morrison', 'Work Email': 'jake.morrison@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB004', 'Hire Date': '2021-08-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maria Gonzalez (row 4)
Raw row data: {'Employee Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Austin', 'Employee Number': 'HUB005', 'Hire Date': '2021-09-22', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ben Parker (row 5)
Raw row data: {'Employee Name': 'Ben Parker', 'Work Email': 'ben.parker@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Marketing Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB006', 'Hire Date': '2021-11-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Chang (row 6)
Raw row data: {'Employee Name': 'Lisa Chang', 'Work Email': 'lisa.chang@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Marketing Manager', 'Office Location': 'San Francisco', 'Employee Number': 'HUB007', 'Hire Date': '2022-01-12', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan O'Connor (row 7)
Raw row data: {'Employee Name': "Ryan O'Connor", 'Work Email': 'ryan.oconnor@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB008', 'Hire Date': '2022-02-28', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Kim (row 8)
Raw row data: {'Employee Name': 'Sarah Kim', 'Work Email': 'sarah.kim@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB009', 'Hire Date': '2022-03-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Diego Ramirez (row 9)
Raw row data: {'Employee Name': 'Diego Ramirez', 'Work Email': 'diego.ramirez@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB010', 'Hire Date': '2022-04-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Wu (row 10)
Raw row data: {'Employee Name': 'Jessica Wu', 'Work Email': 'jessica.wu@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB011', 'Hire Date': '2022-05-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 11)
Raw row data: {'Employee Name': 'Emma Thompson', 'Work Email': 'emma.thompson@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Content Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB012', 'Hire Date': '2022-06-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lee (row 12)
Raw row data: {'Employee Name': 'Nathan Lee', 'Work Email': 'nathan.lee@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Digital Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB013', 'Hire Date': '2022-08-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophia Chen (row 13)
Raw row data: {'Employee Name': 'Sophia Chen', 'Work Email': 'sophia.chen@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Analyst', 'Office Location': 'San Francisco', 'Employee Number': 'HUB014', 'Hire Date': '2022-09-10', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Rodriguez (row 14)
Raw row data: {'Employee Name': 'Alex Rodriguez', 'Work Email': 'alex.rodriguez@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'SEO Specialist', 'Office Location': 'San Francisco', 'Employee Number': 'HUB015', 'Hire Date': '2022-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Johnson (row 15)
Raw row data: {'Employee Name': 'Tyler Johnson', 'Work Email': 'tyler.johnson@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB016', 'Hire Date': '2022-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 16)
Raw row data: {'Employee Name': 'Maya Patel', 'Work Email': 'maya.patel@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB017', 'Hire Date': '2022-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Smith (row 17)
Raw row data: {'Employee Name': 'Jordan Smith', 'Work Email': 'jordan.smith@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB018', 'Hire Date': '2023-01-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Davis (row 18)
Raw row data: {'Employee Name': 'Chloe Davis', 'Work Email': 'chloe.davis@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB019', 'Hire Date': '2023-02-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Luis Martinez (row 19)
Raw row data: {'Employee Name': 'Luis Martinez', 'Work Email': 'luis.martinez@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB020', 'Hire Date': '2023-03-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zara Ahmed (row 20)
Raw row data: {'Employee Name': 'Zara Ahmed', 'Work Email': 'zara.ahmed@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB021', 'Hire Date': '2023-04-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin Zhang (row 21)
Raw row data: {'Employee Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB022', 'Hire Date': '2023-05-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 22)
Raw row data: {'Employee Name': 'Rachel Green', 'Work Email': 'rachel.green@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB023', 'Hire Date': '2023-06-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Moore (row 23)
Raw row data: {'Employee Name': 'Ethan Moore', 'Work Email': 'ethan.moore@techstartup.io', 'Reports To Email': 'tyler.johnson@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB024', 'Hire Date': '2023-07-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Liu (row 24)
Raw row data: {'Employee Name': 'Grace Liu', 'Work Email': 'grace.liu@techstartup.io', 'Reports To Email': 'maya.patel@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB025', 'Hire Date': '2023-08-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Williams (row 25)
Raw row data: {'Employee Name': 'Noah Williams', 'Work Email': 'noah.williams@techstartup.io', 'Reports To Email': 'jordan.smith@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB026', 'Hire Date': '2023-09-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Brown (row 26)
Raw row data: {'Employee Name': 'Ava Brown', 'Work Email': 'ava.brown@techstartup.io', 'Reports To Email': 'chloe.davis@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB027', 'Hire Date': '2023-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Garcia (row 27)
Raw row data: {'Employee Name': 'Logan Garcia', 'Work Email': 'logan.garcia@techstartup.io', 'Reports To Email': 'luis.martinez@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB028', 'Hire Date': '2023-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Taylor (row 28)
Raw row data: {'Employee Name': 'Mia Taylor', 'Work Email': 'mia.taylor@techstartup.io', 'Reports To Email': 'zara.ahmed@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB029', 'Hire Date': '2023-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Amanda Foster (row 0)
Raw row data: {'Employee Name': 'Amanda Foster', 'Work Email': 'amanda.foster@techstartup.io', 'Reports To Email': '', 'Team': 'Revenue', 'Role': 'Chief Revenue Officer', 'Office Location': 'Boston', 'Employee Number': 'HUB001', 'Hire Date': '2021-01-15', 'User Status': 'Active', 'Permissions': 'Super Admin', 'Department': 'Executive'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Carlos Mendoza (row 1)
Raw row data: {'Employee Name': 'Carlos Mendoza', 'Work Email': 'carlos.mendoza@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Revenue', 'Role': 'VP Sales', 'Office Location': 'Boston', 'Employee Number': 'HUB002', 'Hire Date': '2021-03-20', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Priya Sharma (row 2)
Raw row data: {'Employee Name': 'Priya Sharma', 'Work Email': 'priya.sharma@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Marketing', 'Role': 'VP Marketing', 'Office Location': 'Boston', 'Employee Number': 'HUB003', 'Hire Date': '2021-05-10', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jake Morrison (row 3)
Raw row data: {'Employee Name': 'Jake Morrison', 'Work Email': 'jake.morrison@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB004', 'Hire Date': '2021-08-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maria Gonzalez (row 4)
Raw row data: {'Employee Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Austin', 'Employee Number': 'HUB005', 'Hire Date': '2021-09-22', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ben Parker (row 5)
Raw row data: {'Employee Name': 'Ben Parker', 'Work Email': 'ben.parker@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Marketing Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB006', 'Hire Date': '2021-11-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Chang (row 6)
Raw row data: {'Employee Name': 'Lisa Chang', 'Work Email': 'lisa.chang@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Marketing Manager', 'Office Location': 'San Francisco', 'Employee Number': 'HUB007', 'Hire Date': '2022-01-12', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan O'Connor (row 7)
Raw row data: {'Employee Name': "Ryan O'Connor", 'Work Email': 'ryan.oconnor@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB008', 'Hire Date': '2022-02-28', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Kim (row 8)
Raw row data: {'Employee Name': 'Sarah Kim', 'Work Email': 'sarah.kim@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB009', 'Hire Date': '2022-03-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Diego Ramirez (row 9)
Raw row data: {'Employee Name': 'Diego Ramirez', 'Work Email': 'diego.ramirez@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB010', 'Hire Date': '2022-04-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Wu (row 10)
Raw row data: {'Employee Name': 'Jessica Wu', 'Work Email': 'jessica.wu@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB011', 'Hire Date': '2022-05-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 11)
Raw row data: {'Employee Name': 'Emma Thompson', 'Work Email': 'emma.thompson@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Content Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB012', 'Hire Date': '2022-06-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lee (row 12)
Raw row data: {'Employee Name': 'Nathan Lee', 'Work Email': 'nathan.lee@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Digital Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB013', 'Hire Date': '2022-08-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophia Chen (row 13)
Raw row data: {'Employee Name': 'Sophia Chen', 'Work Email': 'sophia.chen@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Analyst', 'Office Location': 'San Francisco', 'Employee Number': 'HUB014', 'Hire Date': '2022-09-10', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Rodriguez (row 14)
Raw row data: {'Employee Name': 'Alex Rodriguez', 'Work Email': 'alex.rodriguez@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'SEO Specialist', 'Office Location': 'San Francisco', 'Employee Number': 'HUB015', 'Hire Date': '2022-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Johnson (row 15)
Raw row data: {'Employee Name': 'Tyler Johnson', 'Work Email': 'tyler.johnson@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB016', 'Hire Date': '2022-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 16)
Raw row data: {'Employee Name': 'Maya Patel', 'Work Email': 'maya.patel@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB017', 'Hire Date': '2022-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Smith (row 17)
Raw row data: {'Employee Name': 'Jordan Smith', 'Work Email': 'jordan.smith@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB018', 'Hire Date': '2023-01-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Davis (row 18)
Raw row data: {'Employee Name': 'Chloe Davis', 'Work Email': 'chloe.davis@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB019', 'Hire Date': '2023-02-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Luis Martinez (row 19)
Raw row data: {'Employee Name': 'Luis Martinez', 'Work Email': 'luis.martinez@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB020', 'Hire Date': '2023-03-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zara Ahmed (row 20)
Raw row data: {'Employee Name': 'Zara Ahmed', 'Work Email': 'zara.ahmed@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB021', 'Hire Date': '2023-04-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin Zhang (row 21)
Raw row data: {'Employee Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB022', 'Hire Date': '2023-05-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 22)
Raw row data: {'Employee Name': 'Rachel Green', 'Work Email': 'rachel.green@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB023', 'Hire Date': '2023-06-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Moore (row 23)
Raw row data: {'Employee Name': 'Ethan Moore', 'Work Email': 'ethan.moore@techstartup.io', 'Reports To Email': 'tyler.johnson@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB024', 'Hire Date': '2023-07-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Liu (row 24)
Raw row data: {'Employee Name': 'Grace Liu', 'Work Email': 'grace.liu@techstartup.io', 'Reports To Email': 'maya.patel@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB025', 'Hire Date': '2023-08-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Williams (row 25)
Raw row data: {'Employee Name': 'Noah Williams', 'Work Email': 'noah.williams@techstartup.io', 'Reports To Email': 'jordan.smith@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB026', 'Hire Date': '2023-09-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Brown (row 26)
Raw row data: {'Employee Name': 'Ava Brown', 'Work Email': 'ava.brown@techstartup.io', 'Reports To Email': 'chloe.davis@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB027', 'Hire Date': '2023-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Garcia (row 27)
Raw row data: {'Employee Name': 'Logan Garcia', 'Work Email': 'logan.garcia@techstartup.io', 'Reports To Email': 'luis.martinez@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB028', 'Hire Date': '2023-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Taylor (row 28)
Raw row data: {'Employee Name': 'Mia Taylor', 'Work Email': 'mia.taylor@techstartup.io', 'Reports To Email': 'zara.ahmed@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB029', 'Hire Date': '2023-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Name', 'Email', 'Role', 'Department', 'Phone', 'Manager Email', 'Location', 'Hire Date', 'Employee ID']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Name', 'Email', 'Role', 'Department', 'Phone', 'Manager Email', 'Location', 'Hire Date', 'Employee ID']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Kim (row 0)
Raw row data: {'Name': 'Sarah Kim', 'Email': 'sarah.kim@techflow.io', 'Role': 'CEO & Founder', 'Department': 'Executive', 'Phone': '+1-555-0101', 'Manager Email': '', 'Location': 'San Francisco', 'Hire Date': '2023-01-15', 'Employee ID': 'TF001'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Marcus Chen (row 1)
Raw row data: {'Name': 'Marcus Chen', 'Email': 'marcus.chen@techflow.io', 'Role': 'CTO', 'Department': 'Engineering', 'Phone': '+1-555-0102', 'Manager Email': 'sarah.kim@techflow.io', 'Location': 'San Francisco', 'Hire Date': '2023-02-01', 'Employee ID': 'TF002'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Rodriguez (row 2)
Raw row data: {'Name': 'Lisa Rodriguez', 'Email': 'lisa.rodriguez@techflow.io', 'Role': 'Head of Product', 'Department': 'Product', 'Phone': '+1-555-0103', 'Manager Email': 'sarah.kim@techflow.io', 'Location': 'San Francisco', 'Hire Date': '2023-02-15', 'Employee ID': 'TF003'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user James Wilson (row 3)
Raw row data: {'Name': 'James Wilson', 'Email': 'james.wilson@techflow.io', 'Role': 'Senior Developer', 'Department': 'Engineering', 'Phone': '+1-555-0104', 'Manager Email': 'marcus.chen@techflow.io', 'Location': 'San Francisco', 'Hire Date': '2023-03-01', 'Employee ID': 'TF004'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 4)
Raw row data: {'Name': 'Emma Thompson', 'Email': 'emma.thompson@techflow.io', 'Role': 'Full Stack Developer', 'Department': 'Engineering', 'Phone': '+1-555-0105', 'Manager Email': 'marcus.chen@techflow.io', 'Location': 'Remote', 'Hire Date': '2023-03-15', 'Employee ID': 'TF005'}
Extracted location info: {'address': 'Remote'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Remote'}
Available regions: ['global']
Converted user_data: {'Address': 'Remote', 'Location': 'Remote'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Remote', 'full_location': 'Remote'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user David Park (row 5)
Raw row data: {'Name': 'David Park', 'Email': 'david.park@techflow.io', 'Role': 'Product Manager', 'Department': 'Product', 'Phone': '+1-555-0106', 'Manager Email': 'lisa.rodriguez@techflow.io', 'Location': 'San Francisco', 'Hire Date': '2023-04-01', 'Employee ID': 'TF006'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 6)
Raw row data: {'Name': 'Rachel Green', 'Email': 'rachel.green@techflow.io', 'Role': 'UX Designer', 'Department': 'Product', 'Phone': '+1-555-0107', 'Manager Email': 'lisa.rodriguez@techflow.io', 'Location': 'Remote', 'Hire Date': '2023-04-15', 'Employee ID': 'TF007'}
Extracted location info: {'address': 'Remote'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Remote'}
Available regions: ['global']
Converted user_data: {'Address': 'Remote', 'Location': 'Remote'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Remote', 'full_location': 'Remote'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Alex Johnson (row 7)
Raw row data: {'Name': 'Alex Johnson', 'Email': 'alex.johnson@techflow.io', 'Role': 'Sales Lead', 'Department': 'Sales', 'Phone': '+1-555-0108', 'Manager Email': 'sarah.kim@techflow.io', 'Location': 'San Francisco', 'Hire Date': '2023-05-01', 'Employee ID': 'TF008'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 8)
Raw row data: {'Name': 'Maya Patel', 'Email': 'maya.patel@techflow.io', 'Role': 'Marketing Manager', 'Department': 'Marketing', 'Phone': '+1-555-0109', 'Manager Email': 'sarah.kim@techflow.io', 'Location': 'Remote', 'Hire Date': '2023-05-15', 'Employee ID': 'TF009'}
Extracted location info: {'address': 'Remote'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Remote'}
Available regions: ['global']
Converted user_data: {'Address': 'Remote', 'Location': 'Remote'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Remote', 'full_location': 'Remote'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 9
Processing user 1/9: Sarah Kim
Successfully processed user Sarah Kim
Processing user 2/9: Marcus Chen
Successfully processed user Marcus Chen
Processing user 3/9: Lisa Rodriguez
Successfully processed user Lisa Rodriguez
Processing user 4/9: James Wilson
Successfully processed user James Wilson
Processing user 5/9: Emma Thompson
Successfully processed user Emma Thompson
Processing user 6/9: David Park
Successfully processed user David Park
Processing user 7/9: Rachel Green
Successfully processed user Rachel Green
Processing user 8/9: Alex Johnson
Successfully processed user Alex Johnson
Processing user 9/9: Maya Patel
Successfully processed user Maya Patel
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Work Email', 'Job Title', 'Business Unit', 'Contact Number', 'Manager Email', 'Office Location', 'Start Date', 'Employee Code', 'Grade Level']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Work Email', 'Job Title', 'Business Unit', 'Contact Number', 'Manager Email', 'Office Location', 'Start Date', 'Employee Code', 'Grade Level']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Catherine Williams (row 0)
Raw row data: {'Full Name': 'Catherine Williams', 'Work Email': 'catherine.williams@globaltech.com', 'Job Title': 'Chief Executive Officer', 'Business Unit': 'Executive Office', 'Contact Number': '+1-555-3001', 'Manager Email': '', 'Office Location': 'New York HQ', 'Start Date': '2018-01-15', 'Employee Code': 'GT001', 'Grade Level': 'C1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jonathan Martinez (row 1)
Raw row data: {'Full Name': 'Jonathan Martinez', 'Work Email': 'jonathan.martinez@globaltech.com', 'Job Title': 'Chief Operating Officer', 'Business Unit': 'Operations', 'Contact Number': '+1-555-3002', 'Manager Email': 'catherine.williams@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2018-03-01', 'Employee Code': 'GT002', 'Grade Level': 'C2'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Elizabeth Chen (row 2)
Raw row data: {'Full Name': 'Elizabeth Chen', 'Work Email': 'elizabeth.chen@globaltech.com', 'Job Title': 'Chief Technology Officer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3003', 'Manager Email': 'catherine.williams@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2018-02-15', 'Employee Code': 'GT003', 'Grade Level': 'C2'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Richard Thompson (row 3)
Raw row data: {'Full Name': 'Richard Thompson', 'Work Email': 'richard.thompson@globaltech.com', 'Job Title': 'Chief Financial Officer', 'Business Unit': 'Finance', 'Contact Number': '+1-555-3004', 'Manager Email': 'catherine.williams@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2018-04-01', 'Employee Code': 'GT004', 'Grade Level': 'C2'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Angela Davis (row 4)
Raw row data: {'Full Name': 'Angela Davis', 'Work Email': 'angela.davis@globaltech.com', 'Job Title': 'Chief Marketing Officer', 'Business Unit': 'Marketing', 'Contact Number': '+1-555-3005', 'Manager Email': 'catherine.williams@globaltech.com', 'Office Location': 'Chicago', 'Start Date': '2018-05-15', 'Employee Code': 'GT005', 'Grade Level': 'C2'}
Extracted location info: {'address': 'Chicago', 'office': 'Chicago'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago', 'office': 'Chicago'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago', 'Location': 'Chicago, Chicago', 'Office': 'Chicago'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago, Chicago', 'full_location': 'Chicago, Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Steven Rodriguez (row 5)
Raw row data: {'Full Name': 'Steven Rodriguez', 'Work Email': 'steven.rodriguez@globaltech.com', 'Job Title': 'Chief Human Resources Officer', 'Business Unit': 'Human Resources', 'Contact Number': '+1-555-3006', 'Manager Email': 'catherine.williams@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2018-06-01', 'Employee Code': 'GT006', 'Grade Level': 'C2'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Patricia Kim (row 6)
Raw row data: {'Full Name': 'Patricia Kim', 'Work Email': 'patricia.kim@globaltech.com', 'Job Title': 'VP of Sales - Americas', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3007', 'Manager Email': 'jonathan.martinez@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2019-01-15', 'Employee Code': 'GT007', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Johnson (row 7)
Raw row data: {'Full Name': 'Michael Johnson', 'Work Email': 'michael.johnson@globaltech.com', 'Job Title': 'VP of Sales - EMEA', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3008', 'Manager Email': 'jonathan.martinez@globaltech.com', 'Office Location': 'London', 'Start Date': '2019-02-01', 'Employee Code': 'GT008', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'London', 'office': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London', 'office': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London, London', 'Office': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London, London', 'full_location': 'London, London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sandra Liu (row 8)
Raw row data: {'Full Name': 'Sandra Liu', 'Work Email': 'sandra.liu@globaltech.com', 'Job Title': 'VP of Sales - APAC', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3009', 'Manager Email': 'jonathan.martinez@globaltech.com', 'Office Location': 'Singapore', 'Start Date': '2019-02-15', 'Employee Code': 'GT009', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'Singapore', 'office': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore', 'office': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore, Singapore', 'Office': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore, Singapore', 'full_location': 'Singapore, Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user David Wilson (row 9)
Raw row data: {'Full Name': 'David Wilson', 'Work Email': 'david.wilson@globaltech.com', 'Job Title': 'VP of Engineering', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3010', 'Manager Email': 'elizabeth.chen@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-03-01', 'Employee Code': 'GT010', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Brown (row 10)
Raw row data: {'Full Name': 'Jennifer Brown', 'Work Email': 'jennifer.brown@globaltech.com', 'Job Title': 'VP of Product', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3011', 'Manager Email': 'elizabeth.chen@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-03-15', 'Employee Code': 'GT011', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Garcia (row 11)
Raw row data: {'Full Name': 'Robert Garcia', 'Work Email': 'robert.garcia@globaltech.com', 'Job Title': 'VP of Infrastructure', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3012', 'Manager Email': 'elizabeth.chen@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2019-04-01', 'Employee Code': 'GT012', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Anderson (row 12)
Raw row data: {'Full Name': 'Lisa Anderson', 'Work Email': 'lisa.anderson@globaltech.com', 'Job Title': 'VP of Finance', 'Business Unit': 'Finance', 'Contact Number': '+1-555-3013', 'Manager Email': 'richard.thompson@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2019-04-15', 'Employee Code': 'GT013', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mark Taylor (row 13)
Raw row data: {'Full Name': 'Mark Taylor', 'Work Email': 'mark.taylor@globaltech.com', 'Job Title': 'VP of Marketing - Digital', 'Business Unit': 'Marketing', 'Contact Number': '+1-555-3014', 'Manager Email': 'angela.davis@globaltech.com', 'Office Location': 'Chicago', 'Start Date': '2019-05-01', 'Employee Code': 'GT014', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'Chicago', 'office': 'Chicago'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago', 'office': 'Chicago'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago', 'Location': 'Chicago, Chicago', 'Office': 'Chicago'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago, Chicago', 'full_location': 'Chicago, Chicago'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Amanda Miller (row 14)
Raw row data: {'Full Name': 'Amanda Miller', 'Work Email': 'amanda.miller@globaltech.com', 'Job Title': 'VP of Marketing - Brand', 'Business Unit': 'Marketing', 'Contact Number': '+1-555-3015', 'Manager Email': 'angela.davis@globaltech.com', 'Office Location': 'Los Angeles', 'Start Date': '2019-05-15', 'Employee Code': 'GT015', 'Grade Level': 'VP1'}
Extracted location info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles, Los Angeles', 'Office': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles, Los Angeles', 'full_location': 'Los Angeles, Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Christopher Lee (row 15)
Raw row data: {'Full Name': 'Christopher Lee', 'Work Email': 'christopher.lee@globaltech.com', 'Job Title': 'Director of Sales - North America', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3016', 'Manager Email': 'patricia.kim@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2019-07-01', 'Employee Code': 'GT016', 'Grade Level': 'D1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah White (row 16)
Raw row data: {'Full Name': 'Sarah White', 'Work Email': 'sarah.white@globaltech.com', 'Job Title': 'Director of Sales - Latin America', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3017', 'Manager Email': 'patricia.kim@globaltech.com', 'Office Location': 'Miami', 'Start Date': '2019-07-15', 'Employee Code': 'GT017', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Miami', 'office': 'Miami'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Miami', 'office': 'Miami'}
Available regions: ['global']
Converted user_data: {'Address': 'Miami', 'Location': 'Miami, Miami', 'Office': 'Miami'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Miami, Miami', 'full_location': 'Miami, Miami'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Miami'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-MIA', 'district_name': 'Miami', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Miami'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Clark (row 17)
Raw row data: {'Full Name': 'Thomas Clark', 'Work Email': 'thomas.clark@globaltech.com', 'Job Title': 'Director of Sales - UK', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3018', 'Manager Email': 'michael.johnson@globaltech.com', 'Office Location': 'London', 'Start Date': '2019-08-01', 'Employee Code': 'GT018', 'Grade Level': 'D1'}
Extracted location info: {'address': 'London', 'office': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London', 'office': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London, London', 'Office': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London, London', 'full_location': 'London, London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Maria Gonzalez (row 18)
Raw row data: {'Full Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@globaltech.com', 'Job Title': 'Director of Sales - Germany', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3019', 'Manager Email': 'michael.johnson@globaltech.com', 'Office Location': 'Berlin', 'Start Date': '2019-08-15', 'Employee Code': 'GT019', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Berlin', 'office': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin', 'office': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin, Berlin', 'Office': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin, Berlin', 'full_location': 'Berlin, Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Kevin Zhang (row 19)
Raw row data: {'Full Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@globaltech.com', 'Job Title': 'Director of Sales - China', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3020', 'Manager Email': 'sandra.liu@globaltech.com', 'Office Location': 'Shanghai', 'Start Date': '2019-09-01', 'Employee Code': 'GT020', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Shanghai', 'office': 'Shanghai'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Shanghai', 'office': 'Shanghai'}
Available regions: ['global']
Converted user_data: {'Address': 'Shanghai', 'Location': 'Shanghai, Shanghai', 'Office': 'Shanghai'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Shanghai, Shanghai', 'full_location': 'Shanghai, Shanghai'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Rachel Patel (row 20)
Raw row data: {'Full Name': 'Rachel Patel', 'Work Email': 'rachel.patel@globaltech.com', 'Job Title': 'Director of Sales - India', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3021', 'Manager Email': 'sandra.liu@globaltech.com', 'Office Location': 'Mumbai', 'Start Date': '2019-09-15', 'Employee Code': 'GT021', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Mumbai', 'office': 'Mumbai'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Mumbai', 'office': 'Mumbai'}
Available regions: ['global']
Converted user_data: {'Address': 'Mumbai', 'Location': 'Mumbai, Mumbai', 'Office': 'Mumbai'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Mumbai, Mumbai', 'full_location': 'Mumbai, Mumbai'}, 'hierarchy': {'country_code': 'IN', 'country': 'India', 'city': 'Mumbai'}, 'country_code': 'IN', 'region': 'apac', 'territories': {'district': 'APAC-MUM', 'district_name': 'Mumbai', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'India', 'city': 'Mumbai'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user James Murphy (row 21)
Raw row data: {'Full Name': 'James Murphy', 'Work Email': 'james.murphy@globaltech.com', 'Job Title': 'Director of Backend Engineering', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3022', 'Manager Email': 'david.wilson@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-10-01', 'Employee Code': 'GT022', 'Grade Level': 'D1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Turner (row 22)
Raw row data: {'Full Name': 'Emily Turner', 'Work Email': 'emily.turner@globaltech.com', 'Job Title': 'Director of Frontend Engineering', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3023', 'Manager Email': 'david.wilson@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-10-15', 'Employee Code': 'GT023', 'Grade Level': 'D1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Cooper (row 23)
Raw row data: {'Full Name': 'Daniel Cooper', 'Work Email': 'daniel.cooper@globaltech.com', 'Job Title': 'Director of Mobile Engineering', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3024', 'Manager Email': 'david.wilson@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2019-11-01', 'Employee Code': 'GT024', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ashley Adams (row 24)
Raw row data: {'Full Name': 'Ashley Adams', 'Work Email': 'ashley.adams@globaltech.com', 'Job Title': 'Director of Product Management', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3025', 'Manager Email': 'jennifer.brown@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-11-15', 'Employee Code': 'GT025', 'Grade Level': 'D1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan Scott (row 25)
Raw row data: {'Full Name': 'Ryan Scott', 'Work Email': 'ryan.scott@globaltech.com', 'Job Title': 'Director of UX Design', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3026', 'Manager Email': 'jennifer.brown@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2019-12-01', 'Employee Code': 'GT026', 'Grade Level': 'D1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Victoria Hall (row 26)
Raw row data: {'Full Name': 'Victoria Hall', 'Work Email': 'victoria.hall@globaltech.com', 'Job Title': 'Director of DevOps', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3027', 'Manager Email': 'robert.garcia@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2020-01-15', 'Employee Code': 'GT027', 'Grade Level': 'D1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Green (row 27)
Raw row data: {'Full Name': 'Nathan Green', 'Work Email': 'nathan.green@globaltech.com', 'Job Title': 'Director of Security', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3028', 'Manager Email': 'robert.garcia@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2020-02-01', 'Employee Code': 'GT028', 'Grade Level': 'D1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophie Parker (row 28)
Raw row data: {'Full Name': 'Sophie Parker', 'Work Email': 'sophie.parker@globaltech.com', 'Job Title': 'Director of Financial Planning', 'Business Unit': 'Finance', 'Contact Number': '+1-555-3029', 'Manager Email': 'lisa.anderson@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2020-02-15', 'Employee Code': 'GT029', 'Grade Level': 'D1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Brooks (row 29)
Raw row data: {'Full Name': 'Jordan Brooks', 'Work Email': 'jordan.brooks@globaltech.com', 'Job Title': 'Director of Corporate Finance', 'Business Unit': 'Finance', 'Contact Number': '+1-555-3030', 'Manager Email': 'lisa.anderson@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2020-03-01', 'Employee Code': 'GT030', 'Grade Level': 'D1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Hill (row 30)
Raw row data: {'Full Name': 'Grace Hill', 'Work Email': 'grace.hill@globaltech.com', 'Job Title': 'Sales Manager - Enterprise', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3031', 'Manager Email': 'christopher.lee@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2020-04-01', 'Employee Code': 'GT031', 'Grade Level': 'M1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Wang (row 31)
Raw row data: {'Full Name': 'Tyler Wang', 'Work Email': 'tyler.wang@globaltech.com', 'Job Title': 'Sales Manager - SMB', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3032', 'Manager Email': 'christopher.lee@globaltech.com', 'Office Location': 'Boston', 'Start Date': '2020-04-15', 'Employee Code': 'GT032', 'Grade Level': 'M1'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Olivia Martinez (row 32)
Raw row data: {'Full Name': 'Olivia Martinez', 'Work Email': 'olivia.martinez@globaltech.com', 'Job Title': 'Sales Manager - West Coast', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3033', 'Manager Email': 'sarah.white@globaltech.com', 'Office Location': 'Los Angeles', 'Start Date': '2020-05-01', 'Employee Code': 'GT033', 'Grade Level': 'M1'}
Extracted location info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles, Los Angeles', 'Office': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles, Los Angeles', 'full_location': 'Los Angeles, Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Brian Collins (row 33)
Raw row data: {'Full Name': 'Brian Collins', 'Work Email': 'brian.collins@globaltech.com', 'Job Title': 'Senior Engineering Manager', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3034', 'Manager Email': 'james.murphy@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-05-15', 'Employee Code': 'GT034', 'Grade Level': 'M1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Rodriguez (row 34)
Raw row data: {'Full Name': 'Jessica Rodriguez', 'Work Email': 'jessica.rodriguez@globaltech.com', 'Job Title': 'Engineering Manager - Platform', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3035', 'Manager Email': 'james.murphy@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2020-06-01', 'Employee Code': 'GT035', 'Grade Level': 'M1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Thompson (row 35)
Raw row data: {'Full Name': 'Alex Thompson', 'Work Email': 'alex.thompson@globaltech.com', 'Job Title': 'Engineering Manager - API', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3036', 'Manager Email': 'emily.turner@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-06-15', 'Employee Code': 'GT036', 'Grade Level': 'M1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Johnson (row 36)
Raw row data: {'Full Name': 'Maya Johnson', 'Work Email': 'maya.johnson@globaltech.com', 'Job Title': 'Engineering Manager - Mobile', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3037', 'Manager Email': 'daniel.cooper@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2020-07-01', 'Employee Code': 'GT037', 'Grade Level': 'M1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lucas Davis (row 37)
Raw row data: {'Full Name': 'Lucas Davis', 'Work Email': 'lucas.davis@globaltech.com', 'Job Title': 'Product Manager - Core', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3038', 'Manager Email': 'ashley.adams@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-07-15', 'Employee Code': 'GT038', 'Grade Level': 'M1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Wilson (row 38)
Raw row data: {'Full Name': 'Chloe Wilson', 'Work Email': 'chloe.wilson@globaltech.com', 'Job Title': 'Product Manager - Analytics', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3039', 'Manager Email': 'ashley.adams@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-08-01', 'Employee Code': 'GT039', 'Grade Level': 'M1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Brown (row 39)
Raw row data: {'Full Name': 'Ethan Brown', 'Work Email': 'ethan.brown@globaltech.com', 'Job Title': 'UX Manager', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3040', 'Manager Email': 'ryan.scott@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-08-15', 'Employee Code': 'GT040', 'Grade Level': 'M1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zoe Garcia (row 40)
Raw row data: {'Full Name': 'Zoe Garcia', 'Work Email': 'zoe.garcia@globaltech.com', 'Job Title': 'Senior Sales Representative', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3041', 'Manager Email': 'grace.hill@globaltech.com', 'Office Location': 'New York HQ', 'Start Date': '2020-10-01', 'Employee Code': 'GT041', 'Grade Level': 'S1'}
Extracted location info: {'address': 'New York HQ', 'office': 'New York HQ'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York HQ', 'office': 'New York HQ'}
Available regions: ['global']
Converted user_data: {'Address': 'New York HQ', 'Location': 'New York HQ, New York HQ', 'Office': 'New York HQ'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York HQ, New York HQ', 'full_location': 'New York HQ, New York HQ'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York Hq'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York Hq', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York Hq'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ian Miller (row 41)
Raw row data: {'Full Name': 'Ian Miller', 'Work Email': 'ian.miller@globaltech.com', 'Job Title': 'Sales Representative', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3042', 'Manager Email': 'tyler.wang@globaltech.com', 'Office Location': 'Boston', 'Start Date': '2020-10-15', 'Employee Code': 'GT042', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Aria Lee (row 42)
Raw row data: {'Full Name': 'Aria Lee', 'Work Email': 'aria.lee@globaltech.com', 'Job Title': 'Account Executive', 'Business Unit': 'Sales', 'Contact Number': '+1-555-3043', 'Manager Email': 'olivia.martinez@globaltech.com', 'Office Location': 'Los Angeles', 'Start Date': '2020-11-01', 'Employee Code': 'GT043', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles', 'office': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles, Los Angeles', 'Office': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles, Los Angeles', 'full_location': 'Los Angeles, Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah White (row 43)
Raw row data: {'Full Name': 'Noah White', 'Work Email': 'noah.white@globaltech.com', 'Job Title': 'Senior Software Engineer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3044', 'Manager Email': 'brian.collins@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2020-11-15', 'Employee Code': 'GT044', 'Grade Level': 'S1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Clark (row 44)
Raw row data: {'Full Name': 'Emma Clark', 'Work Email': 'emma.clark@globaltech.com', 'Job Title': 'Software Engineer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3045', 'Manager Email': 'jessica.rodriguez@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2020-12-01', 'Employee Code': 'GT045', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Liam Gonzalez (row 45)
Raw row data: {'Full Name': 'Liam Gonzalez', 'Work Email': 'liam.gonzalez@globaltech.com', 'Job Title': 'Frontend Engineer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3046', 'Manager Email': 'alex.thompson@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2021-01-15', 'Employee Code': 'GT046', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Zhang (row 46)
Raw row data: {'Full Name': 'Ava Zhang', 'Work Email': 'ava.zhang@globaltech.com', 'Job Title': 'Mobile Developer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3047', 'Manager Email': 'maya.johnson@globaltech.com', 'Office Location': 'Austin', 'Start Date': '2021-02-01', 'Employee Code': 'GT047', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Owen Patel (row 47)
Raw row data: {'Full Name': 'Owen Patel', 'Work Email': 'owen.patel@globaltech.com', 'Job Title': 'Product Analyst', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3048', 'Manager Email': 'lucas.davis@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2021-02-15', 'Employee Code': 'GT048', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Murphy (row 48)
Raw row data: {'Full Name': 'Mia Murphy', 'Work Email': 'mia.murphy@globaltech.com', 'Job Title': 'Data Analyst', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3049', 'Manager Email': 'chloe.wilson@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2021-03-01', 'Employee Code': 'GT049', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Turner (row 49)
Raw row data: {'Full Name': 'Logan Turner', 'Work Email': 'logan.turner@globaltech.com', 'Job Title': 'UX Designer', 'Business Unit': 'Technology', 'Contact Number': '+1-555-3050', 'Manager Email': 'ethan.brown@globaltech.com', 'Office Location': 'San Francisco', 'Start Date': '2021-03-15', 'Employee Code': 'GT050', 'Grade Level': 'IC1'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 50
Processing user 1/50: Unknown
Successfully processed user Unknown
Processing user 2/50: Unknown
Successfully processed user Unknown
Processing user 3/50: Unknown
Successfully processed user Unknown
Processing user 4/50: Unknown
Successfully processed user Unknown
Processing user 5/50: Unknown
Successfully processed user Unknown
Processing user 6/50: Unknown
Successfully processed user Unknown
Processing user 7/50: Unknown
Successfully processed user Unknown
Processing user 8/50: Unknown
Successfully processed user Unknown
Processing user 9/50: Unknown
Successfully processed user Unknown
Processing user 10/50: Unknown
Successfully processed user Unknown
Processing user 11/50: Unknown
Successfully processed user Unknown
Processing user 12/50: Unknown
Successfully processed user Unknown
Processing user 13/50: Unknown
Successfully processed user Unknown
Processing user 14/50: Unknown
Successfully processed user Unknown
Processing user 15/50: Unknown
Successfully processed user Unknown
Processing user 16/50: Unknown
Successfully processed user Unknown
Processing user 17/50: Unknown
Successfully processed user Unknown
Processing user 18/50: Unknown
Successfully processed user Unknown
Processing user 19/50: Unknown
Successfully processed user Unknown
Processing user 20/50: Unknown
Successfully processed user Unknown
Processing user 21/50: Unknown
Successfully processed user Unknown
Processing user 22/50: Unknown
Successfully processed user Unknown
Processing user 23/50: Unknown
Successfully processed user Unknown
Processing user 24/50: Unknown
Successfully processed user Unknown
Processing user 25/50: Unknown
Successfully processed user Unknown
Processing user 26/50: Unknown
Successfully processed user Unknown
Processing user 27/50: Unknown
Successfully processed user Unknown
Processing user 28/50: Unknown
Successfully processed user Unknown
Processing user 29/50: Unknown
Successfully processed user Unknown
Processing user 30/50: Unknown
Successfully processed user Unknown
Processing user 31/50: Unknown
Successfully processed user Unknown
Processing user 32/50: Unknown
Successfully processed user Unknown
Processing user 33/50: Unknown
Successfully processed user Unknown
Processing user 34/50: Unknown
Successfully processed user Unknown
Processing user 35/50: Unknown
Successfully processed user Unknown
Processing user 36/50: Unknown
Successfully processed user Unknown
Processing user 37/50: Unknown
Successfully processed user Unknown
Processing user 38/50: Unknown
Successfully processed user Unknown
Processing user 39/50: Unknown
Successfully processed user Unknown
Processing user 40/50: Unknown
Successfully processed user Unknown
Processing user 41/50: Unknown
Successfully processed user Unknown
Processing user 42/50: Unknown
Successfully processed user Unknown
Processing user 43/50: Unknown
Successfully processed user Unknown
Processing user 44/50: Unknown
Successfully processed user Unknown
Processing user 45/50: Unknown
Successfully processed user Unknown
Processing user 46/50: Unknown
Successfully processed user Unknown
Processing user 47/50: Unknown
Successfully processed user Unknown
Processing user 48/50: Unknown
Successfully processed user Unknown
Processing user 49/50: Unknown
Successfully processed user Unknown
Processing user 50/50: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Job Role', 'Department', 'Shift', 'Supervisor Email', 'Plant Location', 'Hire Date', 'Badge Number', 'Union Status']
Detected location columns: {'address': ['Plant Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Plant Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Job Role', 'Department', 'Shift', 'Supervisor Email', 'Plant Location', 'Hire Date', 'Badge Number', 'Union Status']
Detected location columns: {'address': ['Plant Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Plant Location']
Processing user William Harrison (row 0)
Raw row data: {'Employee Name': 'William Harrison', 'Work Email': 'william.harrison@promanuf.com', 'Job Role': 'Chief Executive Officer', 'Department': 'Executive', 'Shift': 'Day', 'Supervisor Email': '', 'Plant Location': 'Detroit Main', 'Hire Date': '2016-01-15', 'Badge Number': 'PM001', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Susan Martinez (row 1)
Raw row data: {'Employee Name': 'Susan Martinez', 'Work Email': 'susan.martinez@promanuf.com', 'Job Role': 'VP of Operations', 'Department': 'Operations', 'Shift': 'Day', 'Supervisor Email': 'william.harrison@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2016-06-01', 'Badge Number': 'PM002', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Chen (row 2)
Raw row data: {'Employee Name': 'Robert Chen', 'Work Email': 'robert.chen@promanuf.com', 'Job Role': 'VP of Manufacturing', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'william.harrison@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2016-05-15', 'Badge Number': 'PM003', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Patricia Kim (row 3)
Raw row data: {'Employee Name': 'Patricia Kim', 'Work Email': 'patricia.kim@promanuf.com', 'Job Role': 'VP of Quality', 'Department': 'Quality Assurance', 'Shift': 'Day', 'Supervisor Email': 'william.harrison@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2016-07-01', 'Badge Number': 'PM004', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Charles Rodriguez (row 4)
Raw row data: {'Employee Name': 'Charles Rodriguez', 'Work Email': 'charles.rodriguez@promanuf.com', 'Job Role': 'VP of Supply Chain', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'william.harrison@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2016-08-01', 'Badge Number': 'PM005', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Linda Thompson (row 5)
Raw row data: {'Employee Name': 'Linda Thompson', 'Work Email': 'linda.thompson@promanuf.com', 'Job Role': 'Plant Manager - Detroit', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'robert.chen@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2017-01-15', 'Badge Number': 'PM006', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Davis (row 6)
Raw row data: {'Employee Name': 'Michael Davis', 'Work Email': 'michael.davis@promanuf.com', 'Job Role': 'Plant Manager - Chicago', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'robert.chen@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2017-02-01', 'Badge Number': 'PM007', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wilson (row 7)
Raw row data: {'Employee Name': 'Jennifer Wilson', 'Work Email': 'jennifer.wilson@promanuf.com', 'Job Role': 'Plant Manager - Atlanta', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'robert.chen@promanuf.com', 'Plant Location': 'Atlanta Plant', 'Hire Date': '2017-03-01', 'Badge Number': 'PM008', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Atlanta Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Atlanta Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Atlanta Plant', 'Location': 'Atlanta Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Atlanta Plant', 'full_location': 'Atlanta Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Atlanta Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-ATL', 'district_name': 'Atlanta Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Atlanta Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user David Johnson (row 8)
Raw row data: {'Employee Name': 'David Johnson', 'Work Email': 'david.johnson@promanuf.com', 'Job Role': 'Quality Manager - Detroit', 'Department': 'Quality Assurance', 'Shift': 'Day', 'Supervisor Email': 'patricia.kim@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2017-04-01', 'Badge Number': 'PM009', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Brown (row 9)
Raw row data: {'Employee Name': 'Lisa Brown', 'Work Email': 'lisa.brown@promanuf.com', 'Job Role': 'Quality Manager - Chicago', 'Department': 'Quality Assurance', 'Shift': 'Day', 'Supervisor Email': 'patricia.kim@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2017-05-01', 'Badge Number': 'PM010', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Anderson (row 10)
Raw row data: {'Employee Name': 'Thomas Anderson', 'Work Email': 'thomas.anderson@promanuf.com', 'Job Role': 'Supply Chain Manager', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'charles.rodriguez@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2017-06-01', 'Badge Number': 'PM011', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Amanda Garcia (row 11)
Raw row data: {'Employee Name': 'Amanda Garcia', 'Work Email': 'amanda.garcia@promanuf.com', 'Job Role': 'Production Supervisor - A Shift', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'linda.thompson@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2018-01-15', 'Badge Number': 'PM012', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mark Miller (row 12)
Raw row data: {'Employee Name': 'Mark Miller', 'Work Email': 'mark.miller@promanuf.com', 'Job Role': 'Production Supervisor - B Shift', 'Department': 'Manufacturing', 'Shift': 'Evening', 'Supervisor Email': 'linda.thompson@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2018-02-01', 'Badge Number': 'PM013', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Lee (row 13)
Raw row data: {'Employee Name': 'Sarah Lee', 'Work Email': 'sarah.lee@promanuf.com', 'Job Role': 'Production Supervisor - C Shift', 'Department': 'Manufacturing', 'Shift': 'Night', 'Supervisor Email': 'linda.thompson@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2018-03-01', 'Badge Number': 'PM014', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin White (row 14)
Raw row data: {'Employee Name': 'Kevin White', 'Work Email': 'kevin.white@promanuf.com', 'Job Role': 'Production Supervisor - A Shift', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'michael.davis@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2018-04-01', 'Badge Number': 'PM015', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Clark (row 15)
Raw row data: {'Employee Name': 'Rachel Clark', 'Work Email': 'rachel.clark@promanuf.com', 'Job Role': 'Production Supervisor - B Shift', 'Department': 'Manufacturing', 'Shift': 'Evening', 'Supervisor Email': 'michael.davis@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2018-05-01', 'Badge Number': 'PM016', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user James Taylor (row 16)
Raw row data: {'Employee Name': 'James Taylor', 'Work Email': 'james.taylor@promanuf.com', 'Job Role': 'Production Supervisor - A Shift', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'jennifer.wilson@promanuf.com', 'Plant Location': 'Atlanta Plant', 'Hire Date': '2018-06-01', 'Badge Number': 'PM017', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Atlanta Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Atlanta Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Atlanta Plant', 'Location': 'Atlanta Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Atlanta Plant', 'full_location': 'Atlanta Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Atlanta Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-ATL', 'district_name': 'Atlanta Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Atlanta Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Moore (row 17)
Raw row data: {'Employee Name': 'Emily Moore', 'Work Email': 'emily.moore@promanuf.com', 'Job Role': 'Quality Inspector - Day', 'Department': 'Quality Assurance', 'Shift': 'Day', 'Supervisor Email': 'david.johnson@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2018-09-01', 'Badge Number': 'PM018', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Jackson (row 18)
Raw row data: {'Employee Name': 'Daniel Jackson', 'Work Email': 'daniel.jackson@promanuf.com', 'Job Role': 'Quality Inspector - Evening', 'Department': 'Quality Assurance', 'Shift': 'Evening', 'Supervisor Email': 'david.johnson@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2018-10-01', 'Badge Number': 'PM019', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ashley Thompson (row 19)
Raw row data: {'Employee Name': 'Ashley Thompson', 'Work Email': 'ashley.thompson@promanuf.com', 'Job Role': 'Quality Inspector - Day', 'Department': 'Quality Assurance', 'Shift': 'Day', 'Supervisor Email': 'lisa.brown@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2018-11-01', 'Badge Number': 'PM020', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Christopher Williams (row 20)
Raw row data: {'Employee Name': 'Christopher Williams', 'Work Email': 'christopher.williams@promanuf.com', 'Job Role': 'Warehouse Supervisor', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'thomas.anderson@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2019-01-15', 'Badge Number': 'PM021', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Victoria Harris (row 21)
Raw row data: {'Employee Name': 'Victoria Harris', 'Work Email': 'victoria.harris@promanuf.com', 'Job Role': 'Inventory Manager', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'thomas.anderson@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2019-02-01', 'Badge Number': 'PM022', 'Union Status': 'Non-Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan Martin (row 22)
Raw row data: {'Employee Name': 'Ryan Martin', 'Work Email': 'ryan.martin@promanuf.com', 'Job Role': 'Machine Operator - Line 1', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'amanda.garcia@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2019-06-01', 'Badge Number': 'PM023', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Wilson (row 23)
Raw row data: {'Employee Name': 'Maya Wilson', 'Work Email': 'maya.wilson@promanuf.com', 'Job Role': 'Machine Operator - Line 2', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'amanda.garcia@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2019-07-01', 'Badge Number': 'PM024', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Davis (row 24)
Raw row data: {'Employee Name': 'Jordan Davis', 'Work Email': 'jordan.davis@promanuf.com', 'Job Role': 'Machine Operator - Line 3', 'Department': 'Manufacturing', 'Shift': 'Evening', 'Supervisor Email': 'mark.miller@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2019-08-01', 'Badge Number': 'PM025', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Rodriguez (row 25)
Raw row data: {'Employee Name': 'Grace Rodriguez', 'Work Email': 'grace.rodriguez@promanuf.com', 'Job Role': 'Machine Operator - Line 1', 'Department': 'Manufacturing', 'Shift': 'Night', 'Supervisor Email': 'sarah.lee@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2019-09-01', 'Badge Number': 'PM026', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Garcia (row 26)
Raw row data: {'Employee Name': 'Tyler Garcia', 'Work Email': 'tyler.garcia@promanuf.com', 'Job Role': 'Machine Operator - Line 1', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'kevin.white@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2019-10-01', 'Badge Number': 'PM027', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Olivia Martinez (row 27)
Raw row data: {'Employee Name': 'Olivia Martinez', 'Work Email': 'olivia.martinez@promanuf.com', 'Job Role': 'Machine Operator - Line 2', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'kevin.white@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2019-11-01', 'Badge Number': 'PM028', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lopez (row 28)
Raw row data: {'Employee Name': 'Nathan Lopez', 'Work Email': 'nathan.lopez@promanuf.com', 'Job Role': 'Machine Operator - Line 3', 'Department': 'Manufacturing', 'Shift': 'Evening', 'Supervisor Email': 'rachel.clark@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2019-12-01', 'Badge Number': 'PM029', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophie Johnson (row 29)
Raw row data: {'Employee Name': 'Sophie Johnson', 'Work Email': 'sophie.johnson@promanuf.com', 'Job Role': 'Machine Operator - Line 1', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'james.taylor@promanuf.com', 'Plant Location': 'Atlanta Plant', 'Hire Date': '2020-01-15', 'Badge Number': 'PM030', 'Union Status': 'Union'}
Extracted location info: {'address': 'Atlanta Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Atlanta Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Atlanta Plant', 'Location': 'Atlanta Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Atlanta Plant', 'full_location': 'Atlanta Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Atlanta Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-ATL', 'district_name': 'Atlanta Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Atlanta Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lucas Brown (row 30)
Raw row data: {'Employee Name': 'Lucas Brown', 'Work Email': 'lucas.brown@promanuf.com', 'Job Role': 'Assembly Worker - Station A', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'amanda.garcia@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2020-03-01', 'Badge Number': 'PM031', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Wilson (row 31)
Raw row data: {'Employee Name': 'Chloe Wilson', 'Work Email': 'chloe.wilson@promanuf.com', 'Job Role': 'Assembly Worker - Station B', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'amanda.garcia@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2020-04-01', 'Badge Number': 'PM032', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Miller (row 32)
Raw row data: {'Employee Name': 'Ethan Miller', 'Work Email': 'ethan.miller@promanuf.com', 'Job Role': 'Assembly Worker - Station C', 'Department': 'Manufacturing', 'Shift': 'Evening', 'Supervisor Email': 'mark.miller@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2020-05-01', 'Badge Number': 'PM033', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zoe Anderson (row 33)
Raw row data: {'Employee Name': 'Zoe Anderson', 'Work Email': 'zoe.anderson@promanuf.com', 'Job Role': 'Assembly Worker - Station A', 'Department': 'Manufacturing', 'Shift': 'Night', 'Supervisor Email': 'sarah.lee@promanuf.com', 'Plant Location': 'Detroit Main', 'Hire Date': '2020-06-01', 'Badge Number': 'PM034', 'Union Status': 'Union'}
Extracted location info: {'address': 'Detroit Main'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Detroit Main'}
Available regions: ['global']
Converted user_data: {'Address': 'Detroit Main', 'Location': 'Detroit Main'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Detroit Main', 'full_location': 'Detroit Main'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Detroit Main'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-DET', 'district_name': 'Detroit Main', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Detroit Main'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ian Thompson (row 34)
Raw row data: {'Employee Name': 'Ian Thompson', 'Work Email': 'ian.thompson@promanuf.com', 'Job Role': 'Assembly Worker - Station A', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'kevin.white@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2020-07-01', 'Badge Number': 'PM035', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Aria White (row 35)
Raw row data: {'Employee Name': 'Aria White', 'Work Email': 'aria.white@promanuf.com', 'Job Role': 'Assembly Worker - Station B', 'Department': 'Manufacturing', 'Shift': 'Day', 'Supervisor Email': 'kevin.white@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2020-08-01', 'Badge Number': 'PM036', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Garcia (row 36)
Raw row data: {'Employee Name': 'Noah Garcia', 'Work Email': 'noah.garcia@promanuf.com', 'Job Role': 'Forklift Operator', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'christopher.williams@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2020-10-01', 'Badge Number': 'PM037', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Martinez (row 37)
Raw row data: {'Employee Name': 'Emma Martinez', 'Work Email': 'emma.martinez@promanuf.com', 'Job Role': 'Forklift Operator', 'Department': 'Supply Chain', 'Shift': 'Evening', 'Supervisor Email': 'christopher.williams@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2020-11-01', 'Badge Number': 'PM038', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Liam Davis (row 38)
Raw row data: {'Employee Name': 'Liam Davis', 'Work Email': 'liam.davis@promanuf.com', 'Job Role': 'Shipping Clerk', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'christopher.williams@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2021-01-15', 'Badge Number': 'PM039', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Rodriguez (row 39)
Raw row data: {'Employee Name': 'Ava Rodriguez', 'Work Email': 'ava.rodriguez@promanuf.com', 'Job Role': 'Receiving Clerk', 'Department': 'Supply Chain', 'Shift': 'Day', 'Supervisor Email': 'christopher.williams@promanuf.com', 'Plant Location': 'Chicago Plant', 'Hire Date': '2021-02-01', 'Badge Number': 'PM040', 'Union Status': 'Union'}
Extracted location info: {'address': 'Chicago Plant'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Chicago Plant'}
Available regions: ['global']
Converted user_data: {'Address': 'Chicago Plant', 'Location': 'Chicago Plant'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Chicago Plant', 'full_location': 'Chicago Plant'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Chicago Plant'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-CHI', 'district_name': 'Chicago Plant', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Chicago Plant'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 40
Processing user 1/40: Unknown
Successfully processed user Unknown
Processing user 2/40: Unknown
Successfully processed user Unknown
Processing user 3/40: Unknown
Successfully processed user Unknown
Processing user 4/40: Unknown
Successfully processed user Unknown
Processing user 5/40: Unknown
Successfully processed user Unknown
Processing user 6/40: Unknown
Successfully processed user Unknown
Processing user 7/40: Unknown
Successfully processed user Unknown
Processing user 8/40: Unknown
Successfully processed user Unknown
Processing user 9/40: Unknown
Successfully processed user Unknown
Processing user 10/40: Unknown
Successfully processed user Unknown
Processing user 11/40: Unknown
Successfully processed user Unknown
Processing user 12/40: Unknown
Successfully processed user Unknown
Processing user 13/40: Unknown
Successfully processed user Unknown
Processing user 14/40: Unknown
Successfully processed user Unknown
Processing user 15/40: Unknown
Successfully processed user Unknown
Processing user 16/40: Unknown
Successfully processed user Unknown
Processing user 17/40: Unknown
Successfully processed user Unknown
Processing user 18/40: Unknown
Successfully processed user Unknown
Processing user 19/40: Unknown
Successfully processed user Unknown
Processing user 20/40: Unknown
Successfully processed user Unknown
Processing user 21/40: Unknown
Successfully processed user Unknown
Processing user 22/40: Unknown
Successfully processed user Unknown
Processing user 23/40: Unknown
Successfully processed user Unknown
Processing user 24/40: Unknown
Successfully processed user Unknown
Processing user 25/40: Unknown
Successfully processed user Unknown
Processing user 26/40: Unknown
Successfully processed user Unknown
Processing user 27/40: Unknown
Successfully processed user Unknown
Processing user 28/40: Unknown
Successfully processed user Unknown
Processing user 29/40: Unknown
Successfully processed user Unknown
Processing user 30/40: Unknown
Successfully processed user Unknown
Processing user 31/40: Unknown
Successfully processed user Unknown
Processing user 32/40: Unknown
Successfully processed user Unknown
Processing user 33/40: Unknown
Successfully processed user Unknown
Processing user 34/40: Unknown
Successfully processed user Unknown
Processing user 35/40: Unknown
Successfully processed user Unknown
Processing user 36/40: Unknown
Successfully processed user Unknown
Processing user 37/40: Unknown
Successfully processed user Unknown
Processing user 38/40: Unknown
Successfully processed user Unknown
Processing user 39/40: Unknown
Successfully processed user Unknown
Processing user 40/40: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Employee Name', 'Work Email', 'Reports To Email', 'Team', 'Role', 'Office Location', 'Employee Number', 'Hire Date', 'User Status', 'Permissions', 'Department']
Detected location columns: {'address': ['Office Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': ['Office Location']}
  address: ['Office Location']
  office: ['Office Location']
Processing user Amanda Foster (row 0)
Raw row data: {'Employee Name': 'Amanda Foster', 'Work Email': 'amanda.foster@techstartup.io', 'Reports To Email': '', 'Team': 'Revenue', 'Role': 'Chief Revenue Officer', 'Office Location': 'Boston', 'Employee Number': 'HUB001', 'Hire Date': '2021-01-15', 'User Status': 'Active', 'Permissions': 'Super Admin', 'Department': 'Executive'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Carlos Mendoza (row 1)
Raw row data: {'Employee Name': 'Carlos Mendoza', 'Work Email': 'carlos.mendoza@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Revenue', 'Role': 'VP Sales', 'Office Location': 'Boston', 'Employee Number': 'HUB002', 'Hire Date': '2021-03-20', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Priya Sharma (row 2)
Raw row data: {'Employee Name': 'Priya Sharma', 'Work Email': 'priya.sharma@techstartup.io', 'Reports To Email': 'amanda.foster@techstartup.io', 'Team': 'Marketing', 'Role': 'VP Marketing', 'Office Location': 'Boston', 'Employee Number': 'HUB003', 'Hire Date': '2021-05-10', 'User Status': 'Active', 'Permissions': 'Admin', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jake Morrison (row 3)
Raw row data: {'Employee Name': 'Jake Morrison', 'Work Email': 'jake.morrison@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB004', 'Hire Date': '2021-08-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maria Gonzalez (row 4)
Raw row data: {'Employee Name': 'Maria Gonzalez', 'Work Email': 'maria.gonzalez@techstartup.io', 'Reports To Email': 'carlos.mendoza@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Manager', 'Office Location': 'Austin', 'Employee Number': 'HUB005', 'Hire Date': '2021-09-22', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ben Parker (row 5)
Raw row data: {'Employee Name': 'Ben Parker', 'Work Email': 'ben.parker@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Marketing Manager', 'Office Location': 'Boston', 'Employee Number': 'HUB006', 'Hire Date': '2021-11-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Lisa Chang (row 6)
Raw row data: {'Employee Name': 'Lisa Chang', 'Work Email': 'lisa.chang@techstartup.io', 'Reports To Email': 'priya.sharma@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Marketing Manager', 'Office Location': 'San Francisco', 'Employee Number': 'HUB007', 'Hire Date': '2022-01-12', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ryan O'Connor (row 7)
Raw row data: {'Employee Name': "Ryan O'Connor", 'Work Email': 'ryan.oconnor@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB008', 'Hire Date': '2022-02-28', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sarah Kim (row 8)
Raw row data: {'Employee Name': 'Sarah Kim', 'Work Email': 'sarah.kim@techstartup.io', 'Reports To Email': 'jake.morrison@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB009', 'Hire Date': '2022-03-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Diego Ramirez (row 9)
Raw row data: {'Employee Name': 'Diego Ramirez', 'Work Email': 'diego.ramirez@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB010', 'Hire Date': '2022-04-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Wu (row 10)
Raw row data: {'Employee Name': 'Jessica Wu', 'Work Email': 'jessica.wu@techstartup.io', 'Reports To Email': 'maria.gonzalez@techstartup.io', 'Team': 'Revenue', 'Role': 'Senior Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB011', 'Hire Date': '2022-05-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emma Thompson (row 11)
Raw row data: {'Employee Name': 'Emma Thompson', 'Work Email': 'emma.thompson@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Content Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB012', 'Hire Date': '2022-06-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Nathan Lee (row 12)
Raw row data: {'Employee Name': 'Nathan Lee', 'Work Email': 'nathan.lee@techstartup.io', 'Reports To Email': 'ben.parker@techstartup.io', 'Team': 'Marketing', 'Role': 'Digital Marketing Specialist', 'Office Location': 'Boston', 'Employee Number': 'HUB013', 'Hire Date': '2022-08-05', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Sophia Chen (row 13)
Raw row data: {'Employee Name': 'Sophia Chen', 'Work Email': 'sophia.chen@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'Growth Analyst', 'Office Location': 'San Francisco', 'Employee Number': 'HUB014', 'Hire Date': '2022-09-10', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Alex Rodriguez (row 14)
Raw row data: {'Employee Name': 'Alex Rodriguez', 'Work Email': 'alex.rodriguez@techstartup.io', 'Reports To Email': 'lisa.chang@techstartup.io', 'Team': 'Marketing', 'Role': 'SEO Specialist', 'Office Location': 'San Francisco', 'Employee Number': 'HUB015', 'Hire Date': '2022-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Marketing'}
Extracted location info: {'address': 'San Francisco', 'office': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco', 'office': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco, San Francisco', 'Office': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco, San Francisco', 'full_location': 'San Francisco, San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Tyler Johnson (row 15)
Raw row data: {'Employee Name': 'Tyler Johnson', 'Work Email': 'tyler.johnson@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB016', 'Hire Date': '2022-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Maya Patel (row 16)
Raw row data: {'Employee Name': 'Maya Patel', 'Work Email': 'maya.patel@techstartup.io', 'Reports To Email': 'ryan.oconnor@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB017', 'Hire Date': '2022-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jordan Smith (row 17)
Raw row data: {'Employee Name': 'Jordan Smith', 'Work Email': 'jordan.smith@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB018', 'Hire Date': '2023-01-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Chloe Davis (row 18)
Raw row data: {'Employee Name': 'Chloe Davis', 'Work Email': 'chloe.davis@techstartup.io', 'Reports To Email': 'sarah.kim@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Boston', 'Employee Number': 'HUB019', 'Hire Date': '2023-02-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Luis Martinez (row 19)
Raw row data: {'Employee Name': 'Luis Martinez', 'Work Email': 'luis.martinez@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB020', 'Hire Date': '2023-03-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Zara Ahmed (row 20)
Raw row data: {'Employee Name': 'Zara Ahmed', 'Work Email': 'zara.ahmed@techstartup.io', 'Reports To Email': 'diego.ramirez@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB021', 'Hire Date': '2023-04-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Kevin Zhang (row 21)
Raw row data: {'Employee Name': 'Kevin Zhang', 'Work Email': 'kevin.zhang@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB022', 'Hire Date': '2023-05-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 22)
Raw row data: {'Employee Name': 'Rachel Green', 'Work Email': 'rachel.green@techstartup.io', 'Reports To Email': 'jessica.wu@techstartup.io', 'Team': 'Revenue', 'Role': 'Account Executive', 'Office Location': 'Austin', 'Employee Number': 'HUB023', 'Hire Date': '2023-06-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ethan Moore (row 23)
Raw row data: {'Employee Name': 'Ethan Moore', 'Work Email': 'ethan.moore@techstartup.io', 'Reports To Email': 'tyler.johnson@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB024', 'Hire Date': '2023-07-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Liu (row 24)
Raw row data: {'Employee Name': 'Grace Liu', 'Work Email': 'grace.liu@techstartup.io', 'Reports To Email': 'maya.patel@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB025', 'Hire Date': '2023-08-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Noah Williams (row 25)
Raw row data: {'Employee Name': 'Noah Williams', 'Work Email': 'noah.williams@techstartup.io', 'Reports To Email': 'jordan.smith@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB026', 'Hire Date': '2023-09-30', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Ava Brown (row 26)
Raw row data: {'Employee Name': 'Ava Brown', 'Work Email': 'ava.brown@techstartup.io', 'Reports To Email': 'chloe.davis@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Boston', 'Employee Number': 'HUB027', 'Hire Date': '2023-10-15', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Boston', 'office': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston', 'office': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston, Boston', 'Office': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston, Boston', 'full_location': 'Boston, Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Logan Garcia (row 27)
Raw row data: {'Employee Name': 'Logan Garcia', 'Work Email': 'logan.garcia@techstartup.io', 'Reports To Email': 'luis.martinez@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB028', 'Hire Date': '2023-11-20', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Mia Taylor (row 28)
Raw row data: {'Employee Name': 'Mia Taylor', 'Work Email': 'mia.taylor@techstartup.io', 'Reports To Email': 'zara.ahmed@techstartup.io', 'Team': 'Revenue', 'Role': 'Sales Development Rep', 'Office Location': 'Austin', 'Employee Number': 'HUB029', 'Hire Date': '2023-12-25', 'User Status': 'Active', 'Permissions': 'User', 'Department': 'Sales'}
Extracted location info: {'address': 'Austin', 'office': 'Austin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Austin', 'office': 'Austin'}
Available regions: ['global']
Converted user_data: {'Address': 'Austin', 'Location': 'Austin, Austin', 'Office': 'Austin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Austin, Austin', 'full_location': 'Austin, Austin'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Austin'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-AUS', 'district_name': 'Austin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Austin'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 29
Processing user 1/29: Unknown
Successfully processed user Unknown
Processing user 2/29: Unknown
Successfully processed user Unknown
Processing user 3/29: Unknown
Successfully processed user Unknown
Processing user 4/29: Unknown
Successfully processed user Unknown
Processing user 5/29: Unknown
Successfully processed user Unknown
Processing user 6/29: Unknown
Successfully processed user Unknown
Processing user 7/29: Unknown
Successfully processed user Unknown
Processing user 8/29: Unknown
Successfully processed user Unknown
Processing user 9/29: Unknown
Successfully processed user Unknown
Processing user 10/29: Unknown
Successfully processed user Unknown
Processing user 11/29: Unknown
Successfully processed user Unknown
Processing user 12/29: Unknown
Successfully processed user Unknown
Processing user 13/29: Unknown
Successfully processed user Unknown
Processing user 14/29: Unknown
Successfully processed user Unknown
Processing user 15/29: Unknown
Successfully processed user Unknown
Processing user 16/29: Unknown
Successfully processed user Unknown
Processing user 17/29: Unknown
Successfully processed user Unknown
Processing user 18/29: Unknown
Successfully processed user Unknown
Processing user 19/29: Unknown
Successfully processed user Unknown
Processing user 20/29: Unknown
Successfully processed user Unknown
Processing user 21/29: Unknown
Successfully processed user Unknown
Processing user 22/29: Unknown
Successfully processed user Unknown
Processing user 23/29: Unknown
Successfully processed user Unknown
Processing user 24/29: Unknown
Successfully processed user Unknown
Processing user 25/29: Unknown
Successfully processed user Unknown
Processing user 26/29: Unknown
Successfully processed user Unknown
Processing user 27/29: Unknown
Successfully processed user Unknown
Processing user 28/29: Unknown
Successfully processed user Unknown
Processing user 29/29: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'AD', 'country': 'Andorra', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'AD', 'country': 'Andorra'}, 'country_code': 'AD', 'region': 'emea', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Andorra'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'AD', 'country': 'Andorra', 'city': 'New York'}, 'country_code': 'AD', 'region': 'emea', 'territories': {'district': 'EMEA-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Andorra', 'city': 'New York'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'AD', 'region': 'emea', 'territories': {'district': 'EMEA-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'AD', 'country': 'Andorra', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Andorra', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Mark Stevens (row 10)
Raw row data: {'Full Name': 'Mark Stevens', 'Email': 'mark.stevens@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Boston', 'Employee ID': 'BT011', 'Start Date': '2022-01-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Boston'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Boston'}
Available regions: ['global']
Converted user_data: {'Address': 'Boston', 'Location': 'Boston'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Boston', 'full_location': 'Boston'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Boston'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-BOS', 'district_name': 'Boston', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Boston'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Rachel Green (row 11)
Raw row data: {'Full Name': 'Rachel Green', 'Email': 'rachel.green@acmecorp.com', 'Manager Email': 'lisa.thompson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'New York', 'Employee ID': 'NY012', 'Start Date': '2022-02-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Thomas Brown (row 12)
Raw row data: {'Full Name': 'Thomas Brown', 'Email': 'thomas.brown@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'San Francisco', 'Employee ID': 'SF013', 'Start Date': '2022-03-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jessica Miller (row 13)
Raw row data: {'Full Name': 'Jessica Miller', 'Email': 'jessica.miller@acmecorp.com', 'Manager Email': 'robert.johnson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Senior Account Executive', 'Location': 'Los Angeles', 'Employee ID': 'LA014', 'Start Date': '2022-04-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Daniel Garcia (row 14)
Raw row data: {'Full Name': 'Daniel Garcia', 'Email': 'daniel.garcia@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Manchester', 'Employee ID': 'MN015', 'Start Date': '2022-05-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Manchester'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Manchester'}
Available regions: ['global']
Converted user_data: {'Address': 'Manchester', 'Location': 'Manchester'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Manchester', 'full_location': 'Manchester'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Manchester'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-MAN', 'district_name': 'Manchester', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Manchester'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Sophie Martinez (row 15)
Raw row data: {'Full Name': 'Sophie Martinez', 'Email': 'sophie.martinez@acmecorp.com', 'Manager Email': 'emily.davis@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Birmingham', 'Employee ID': 'BM016', 'Start Date': '2022-07-08', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Birmingham'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Birmingham'}
Available regions: ['global']
Converted user_data: {'Address': 'Birmingham', 'Location': 'Birmingham'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Birmingham', 'full_location': 'Birmingham'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Birmingham'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-BIR', 'district_name': 'Birmingham', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Birmingham'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Oliver Schmidt (row 16)
Raw row data: {'Full Name': 'Oliver Schmidt', 'Email': 'oliver.schmidt@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Munich', 'Employee ID': 'MU017', 'Start Date': '2022-08-12', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Munich'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Munich'}
Available regions: ['global']
Converted user_data: {'Address': 'Munich', 'Location': 'Munich'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Munich', 'full_location': 'Munich'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Munich'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-MUN', 'district_name': 'Munich', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Munich'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Hans Mueller (row 17)
Raw row data: {'Full Name': 'Hans Mueller', 'Email': 'hans.mueller@acmecorp.com', 'Manager Email': 'james.wilson@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Frankfurt', 'Employee ID': 'FR018', 'Start Date': '2022-09-18', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Frankfurt'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Frankfurt'}
Available regions: ['global']
Converted user_data: {'Address': 'Frankfurt', 'Location': 'Frankfurt'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Frankfurt', 'full_location': 'Frankfurt'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Frankfurt'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-FRA', 'district_name': 'Frankfurt', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Frankfurt'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Emma Taylor (row 18)
Raw row data: {'Full Name': 'Emma Taylor', 'Email': 'emma.taylor@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Melbourne', 'Employee ID': 'ML019', 'Start Date': '2022-10-22', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Melbourne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Melbourne'}
Available regions: ['global']
Converted user_data: {'Address': 'Melbourne', 'Location': 'Melbourne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Melbourne', 'full_location': 'Melbourne'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Melbourne'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-MEL', 'district_name': 'Melbourne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Melbourne'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Jack Wilson (row 19)
Raw row data: {'Full Name': 'Jack Wilson', 'Email': 'jack.wilson@acmecorp.com', 'Manager Email': 'anna.patel@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Brisbane', 'Employee ID': 'BR020', 'Start Date': '2022-11-28', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Brisbane'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Brisbane'}
Available regions: ['global']
Converted user_data: {'Address': 'Brisbane', 'Location': 'Brisbane'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Brisbane', 'full_location': 'Brisbane'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Brisbane'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-BRI', 'district_name': 'Brisbane', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Brisbane'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Ryan Tan (row 20)
Raw row data: {'Full Name': 'Ryan Tan', 'Email': 'ryan.tan@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Bangkok', 'Employee ID': 'BK021', 'Start Date': '2023-01-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Bangkok'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Bangkok'}
Available regions: ['global']
Converted user_data: {'Address': 'Bangkok', 'Location': 'Bangkok'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Bangkok', 'full_location': 'Bangkok'}, 'hierarchy': {'country_code': 'TH', 'country': 'Thailand', 'city': 'Bangkok'}, 'country_code': 'TH', 'region': 'apac', 'territories': {'district': 'APAC-BAN', 'district_name': 'Bangkok', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Thailand', 'city': 'Bangkok'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Maya Lim (row 21)
Raw row data: {'Full Name': 'Maya Lim', 'Email': 'maya.lim@acmecorp.com', 'Manager Email': 'kevin.zhang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Account Executive', 'Location': 'Kuala Lumpur', 'Employee ID': 'KL022', 'Start Date': '2023-02-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Kuala Lumpur'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Kuala Lumpur'}
Available regions: ['global']
Converted user_data: {'Address': 'Kuala Lumpur', 'Location': 'Kuala Lumpur'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Kuala Lumpur', 'full_location': 'Kuala Lumpur'}, 'hierarchy': {'country_code': 'MY', 'country': 'Malaysia', 'city': 'Kuala Lumpur'}, 'country_code': 'MY', 'region': 'apac', 'territories': {'district': 'APAC-KUA', 'district_name': 'Kuala Lumpur', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Malaysia', 'city': 'Kuala Lumpur'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Alex Johnson (row 22)
Raw row data: {'Full Name': 'Alex Johnson', 'Email': 'alex.johnson@acmecorp.com', 'Manager Email': 'mark.stevens@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Hartford', 'Employee ID': 'HT023', 'Start Date': '2023-03-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Hartford'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Hartford'}
Available regions: ['global']
Converted user_data: {'Address': 'Hartford', 'Location': 'Hartford'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Hartford', 'full_location': 'Hartford'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Chloe Davis (row 23)
Raw row data: {'Full Name': 'Chloe Davis', 'Email': 'chloe.davis@acmecorp.com', 'Manager Email': 'rachel.green@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Newark', 'Employee ID': 'NW024', 'Start Date': '2023-04-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Newark'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Newark'}
Available regions: ['global']
Converted user_data: {'Address': 'Newark', 'Location': 'Newark'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Newark', 'full_location': 'Newark'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Noah Williams (row 24)
Raw row data: {'Full Name': 'Noah Williams', 'Email': 'noah.williams@acmecorp.com', 'Manager Email': 'thomas.brown@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'San Jose', 'Employee ID': 'SJ025', 'Start Date': '2023-05-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'San Jose'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Jose'}
Available regions: ['global']
Converted user_data: {'Address': 'San Jose', 'Location': 'San Jose'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Jose', 'full_location': 'San Jose'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'San Jose'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Jose', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'San Jose'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Grace Lee (row 25)
Raw row data: {'Full Name': 'Grace Lee', 'Email': 'grace.lee@acmecorp.com', 'Manager Email': 'jessica.miller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Junior Account Executive', 'Location': 'Pasadena', 'Employee ID': 'PA026', 'Start Date': '2023-06-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Pasadena'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Pasadena'}
Available regions: ['global']
Converted user_data: {'Address': 'Pasadena', 'Location': 'Pasadena'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Pasadena', 'full_location': 'Pasadena'}, 'hierarchy': {}, 'country_code': None, 'region': None, 'territories': {}, 'confidence': 0.0, 'method': 'none', 'admin_levels': {}}
FAILED: No region or low confidence. Region: None, Confidence: 0.0
Falling back to manual region mapping...
No matches found, defaulting to 'global'
Processing user Ethan Moore (row 26)
Raw row data: {'Full Name': 'Ethan Moore', 'Email': 'ethan.moore@acmecorp.com', 'Manager Email': 'daniel.garcia@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Liverpool', 'Employee ID': 'LV027', 'Start Date': '2023-07-25', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Liverpool'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Liverpool'}
Available regions: ['global']
Converted user_data: {'Address': 'Liverpool', 'Location': 'Liverpool'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Liverpool', 'full_location': 'Liverpool'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Liverpool'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LIV', 'district_name': 'Liverpool', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Liverpool'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Zoe Clark (row 27)
Raw row data: {'Full Name': 'Zoe Clark', 'Email': 'zoe.clark@acmecorp.com', 'Manager Email': 'sophie.martinez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Coventry', 'Employee ID': 'CV028', 'Start Date': '2023-08-30', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Coventry'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Coventry'}
Available regions: ['global']
Converted user_data: {'Address': 'Coventry', 'Location': 'Coventry'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Coventry', 'full_location': 'Coventry'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'Coventry'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-COV', 'district_name': 'Coventry', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'Coventry'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Lucas Weber (row 28)
Raw row data: {'Full Name': 'Lucas Weber', 'Email': 'lucas.weber@acmecorp.com', 'Manager Email': 'oliver.schmidt@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Stuttgart', 'Employee ID': 'ST029', 'Start Date': '2023-09-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Stuttgart'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Stuttgart'}
Available regions: ['global']
Converted user_data: {'Address': 'Stuttgart', 'Location': 'Stuttgart'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Stuttgart', 'full_location': 'Stuttgart'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Stuttgart'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-STU', 'district_name': 'Stuttgart', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Stuttgart'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Mia Fischer (row 29)
Raw row data: {'Full Name': 'Mia Fischer', 'Email': 'mia.fischer@acmecorp.com', 'Manager Email': 'hans.mueller@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Development Rep', 'Location': 'Cologne', 'Employee ID': 'CL030', 'Start Date': '2023-10-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Cologne'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Cologne'}
Available regions: ['global']
Converted user_data: {'Address': 'Cologne', 'Location': 'Cologne'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Cologne', 'full_location': 'Cologne'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Cologne'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-COL', 'district_name': 'Cologne', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Cologne'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
SmartLocationMapperRBAAgent result: True
=== USER PROCESSING LOOP ===
Total users to process: 30
Processing user 1/30: Unknown
Successfully processed user Unknown
Processing user 2/30: Unknown
Successfully processed user Unknown
Processing user 3/30: Unknown
Successfully processed user Unknown
Processing user 4/30: Unknown
Successfully processed user Unknown
Processing user 5/30: Unknown
Successfully processed user Unknown
Processing user 6/30: Unknown
Successfully processed user Unknown
Processing user 7/30: Unknown
Successfully processed user Unknown
Processing user 8/30: Unknown
Successfully processed user Unknown
Processing user 9/30: Unknown
Successfully processed user Unknown
Processing user 10/30: Unknown
Successfully processed user Unknown
Processing user 11/30: Unknown
Successfully processed user Unknown
Processing user 12/30: Unknown
Successfully processed user Unknown
Processing user 13/30: Unknown
Successfully processed user Unknown
Processing user 14/30: Unknown
Successfully processed user Unknown
Processing user 15/30: Unknown
Successfully processed user Unknown
Processing user 16/30: Unknown
Successfully processed user Unknown
Processing user 17/30: Unknown
Successfully processed user Unknown
Processing user 18/30: Unknown
Successfully processed user Unknown
Processing user 19/30: Unknown
Successfully processed user Unknown
Processing user 20/30: Unknown
Successfully processed user Unknown
Processing user 21/30: Unknown
Successfully processed user Unknown
Processing user 22/30: Unknown
Successfully processed user Unknown
Processing user 23/30: Unknown
Successfully processed user Unknown
Processing user 24/30: Unknown
Successfully processed user Unknown
Processing user 25/30: Unknown
Successfully processed user Unknown
Processing user 26/30: Unknown
Successfully processed user Unknown
Processing user 27/30: Unknown
Successfully processed user Unknown
Processing user 28/30: Unknown
Successfully processed user Unknown
Processing user 29/30: Unknown
Successfully processed user Unknown
Processing user 30/30: Unknown
Successfully processed user Unknown
=== OnboardingRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
==================================================
=== OnboardingRBAAgent location mapping check ===
enable_smart_location_mapping: True
Config keys: ['enable_region_assignment', 'enable_segment_assignment', 'enable_territory_assignment', 'enable_area_assignment', 'enable_district_assignment', 'enable_smart_location_mapping', 'create_hierarchical_structure', 'assign_heads_by_geography', 'region_distribution_strategy']
Smart location mapping is ENABLED, executing...
Calling SmartLocationMapperRBAAgent._execute_rba_logic
=== SmartLocationMapperRBAAgent._execute_rba_logic CALLED ===
Context keys: ['users_data', 'workflow_config', 'tenant_id', 'user_id']
Config: {'enable_region_assignment': True, 'enable_segment_assignment': True, 'enable_territory_assignment': True, 'enable_area_assignment': True, 'enable_district_assignment': True, 'enable_smart_location_mapping': True, 'create_hierarchical_structure': True, 'assign_heads_by_geography': True, 'region_distribution_strategy': 'smart_location'}
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
=== COLUMN DETECTION DEBUG ===
Available columns: ['Full Name', 'Email', 'Manager Email', 'Department', 'Job Title', 'Location', 'Employee ID', 'Start Date', 'Role', 'User Type', 'Profile']
Detected location columns: {'address': ['Location'], 'city': [], 'state': [], 'country': [], 'postal_code': [], 'office': []}
  address: ['Location']
Processing user Sarah Chen (row 0)
Raw row data: {'Full Name': 'Sarah Chen', 'Email': 'sarah.chen@acmecorp.com', 'Manager Email': '', 'Department': 'Executive', 'Job Title': 'Chief Revenue Officer', 'Location': 'San Francisco', 'Employee ID': 'SF001', 'Start Date': '2020-01-15', 'Role': 'CRO Role', 'User Type': 'Standard User', 'Profile': 'Sales Executive'}
Extracted location info: {'address': 'San Francisco'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'San Francisco'}
Available regions: ['global']
Converted user_data: {'Address': 'San Francisco', 'Location': 'San Francisco'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'San Francisco', 'full_location': 'San Francisco'}, 'hierarchy': {'country_code': 'AD', 'country': 'Andorra', 'city': 'San Francisco'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-SAN', 'district_name': 'San Francisco', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Andorra', 'city': 'San Francisco'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Michael Rodriguez (row 1)
Raw row data: {'Full Name': 'Michael Rodriguez', 'Email': 'michael.rodriguez@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - Americas', 'Location': 'New York', 'Employee ID': 'NY002', 'Start Date': '2020-03-10', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Jennifer Wang (row 2)
Raw row data: {'Full Name': 'Jennifer Wang', 'Email': 'jennifer.wang@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - EMEA', 'Location': 'London', 'Employee ID': 'LD003', 'Start Date': '2020-05-20', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user David Kim (row 3)
Raw row data: {'Full Name': 'David Kim', 'Email': 'david.kim@acmecorp.com', 'Manager Email': 'sarah.chen@acmecorp.com', 'Department': 'Sales', 'Job Title': 'VP Sales - APAC', 'Location': 'Singapore', 'Employee ID': 'SG004', 'Start Date': '2020-07-12', 'Role': 'Sales Manager', 'User Type': 'Standard User', 'Profile': 'Sales Manager'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Singapore', 'full_location': 'Singapore'}, 'hierarchy': {'country_code': 'SG', 'country': 'Singapore'}, 'country_code': 'SG', 'region': 'apac', 'territories': {}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Singapore'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Lisa Thompson (row 4)
Raw row data: {'Full Name': 'Lisa Thompson', 'Email': 'lisa.thompson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - East', 'Location': 'New York', 'Employee ID': 'NY005', 'Start Date': '2021-02-01', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'New York'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'New York'}
Available regions: ['global']
Converted user_data: {'Address': 'New York', 'Location': 'New York'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'New York', 'full_location': 'New York'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'New York'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-NEW', 'district_name': 'New York', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'New York'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Robert Johnson (row 5)
Raw row data: {'Full Name': 'Robert Johnson', 'Email': 'robert.johnson@acmecorp.com', 'Manager Email': 'michael.rodriguez@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - West', 'Location': 'Los Angeles', 'Employee ID': 'LA006', 'Start Date': '2021-03-15', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Los Angeles'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Los Angeles'}
Available regions: ['global']
Converted user_data: {'Address': 'Los Angeles', 'Location': 'Los Angeles'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Los Angeles', 'full_location': 'Los Angeles'}, 'hierarchy': {'country_code': 'US', 'country': 'United States', 'city': 'Los Angeles'}, 'country_code': 'US', 'region': 'north_america', 'territories': {'district': 'NORT-LOS', 'district_name': 'Los Angeles', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'United States', 'city': 'Los Angeles'}}
SUCCESS: Assigned region 'north_america' with confidence 0.95
Processing user Emily Davis (row 6)
Raw row data: {'Full Name': 'Emily Davis', 'Email': 'emily.davis@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - UK', 'Location': 'London', 'Employee ID': 'LD007', 'Start Date': '2021-04-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'London'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'London'}
Available regions: ['global']
Converted user_data: {'Address': 'London', 'Location': 'London'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'London', 'full_location': 'London'}, 'hierarchy': {'country_code': 'GB', 'country': 'United Kingdom', 'city': 'London'}, 'country_code': 'GB', 'region': 'emea', 'territories': {'district': 'EMEA-LON', 'district_name': 'London', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'city': 'London'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user James Wilson (row 7)
Raw row data: {'Full Name': 'James Wilson', 'Email': 'james.wilson@acmecorp.com', 'Manager Email': 'jennifer.wang@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - DACH', 'Location': 'Berlin', 'Employee ID': 'BE008', 'Start Date': '2021-06-10', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Berlin'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Berlin'}
Available regions: ['global']
Converted user_data: {'Address': 'Berlin', 'Location': 'Berlin'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Berlin', 'full_location': 'Berlin'}, 'hierarchy': {'country_code': 'DE', 'country': 'Germany', 'city': 'Berlin'}, 'country_code': 'DE', 'region': 'emea', 'territories': {'district': 'EMEA-BER', 'district_name': 'Berlin', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Germany', 'city': 'Berlin'}}
SUCCESS: Assigned region 'emea' with confidence 0.95
Processing user Anna Patel (row 8)
Raw row data: {'Full Name': 'Anna Patel', 'Email': 'anna.patel@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - ANZ', 'Location': 'Sydney', 'Employee ID': 'SY009', 'Start Date': '2021-08-05', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Sydney'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Sydney'}
Available regions: ['global']
Converted user_data: {'Address': 'Sydney', 'Location': 'Sydney'}
Calling geolocation service...
Geolocation service result: {'location_found': True, 'location_data': {'address': 'Sydney', 'full_location': 'Sydney'}, 'hierarchy': {'country_code': 'AU', 'country': 'Australia', 'city': 'Sydney'}, 'country_code': 'AU', 'region': 'apac', 'territories': {'district': 'APAC-SYD', 'district_name': 'Sydney', 'district_type': 'City'}, 'confidence': 0.95, 'method': 'full_hierarchy_detection', 'admin_levels': {'country': 'Australia', 'city': 'Sydney'}}
SUCCESS: Assigned region 'apac' with confidence 0.95
Processing user Kevin Zhang (row 9)
Raw row data: {'Full Name': 'Kevin Zhang', 'Email': 'kevin.zhang@acmecorp.com', 'Manager Email': 'david.kim@acmecorp.com', 'Department': 'Sales', 'Job Title': 'Sales Director - SEA', 'Location': 'Singapore', 'Employee ID': 'SG010', 'Start Date': '2021-09-20', 'Role': 'Sales User', 'User Type': 'Standard User', 'Profile': 'Sales Rep'}
Extracted location info: {'address': 'Singapore'}
=== _assign_user_to_region START ===
Input location_info: {'address': 'Singapore'}
Available regions: ['global']
Converted user_data: {'Address': 'Singapore', 'Location': 'Singapore'}
Calling geolocation service...
